<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>F#を使用して10分で学ぶDeedle
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Easy to use .NET library for data manipulation and scientific programming">
    <meta name="author" content="BlueMountain Capital">

    <script src="http://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="http://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">

    <link type="text/css" rel="stylesheet" href="/Deedle/ja/../content/style.css" />
    <link type="text/css" rel="stylesheet" href="/Deedle/ja/../content/deedle.css" />
    <script type="text/javascript" src="/Deedle/ja/../content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://fsharp.github.io/FSharp.Data"><img height="16" width="16" src="http://fsharp.org/images/thumbs/FSharp.Data.png" /> F# Data</a></li>
          <li><a href="http://bluemountaincapital.github.io/FSharpRProvider"><img height=" 16" width="16" src="http://fsharp.org/images/thumbs/FSharpRProvider.png" /> R Provider</a></li>
          <li><a href="http://fsharp.github.io/FSharp.Charting/"><img height="16" width="16" src="http://fsharp.org/images/thumbs/FSharp.Charting.png" /> F# Charting</a></li>
        </ul>
        <h3 class="muted"><a href="/Deedle/ja/index.html">Deedle</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1>F#を使用して10分で学ぶDeedle</h1>

<p>このドキュメントでは、F#のデータフレームライブラリにおける主要な機能の概要を説明します。
なおこのページをGitHubから <a href="https://github.com/BlueMountainCapital/Deedle/blob/master/docs/content/tutorial.fsx">F# スクリプトファイル</a>
としてダウンロードすれば、サンプルをインタラクティブに実行することもできます。</p>

<p>最初の手順として、 <a href="https://www.nuget.org/packages/Deedle">NuGet経由で</a> <code>Deedle.dll</code> をインストールします。
次にライブラリをロードします。
F# Interactive上でライブラリの <code>.dll</code> をロードしている <code>.fsx</code> ファイルをロードし、
データフレームやシリーズデータを表す型に対するプリンターを適宜登録します。
今回のサンプルでは <a href="http://fsharp.github.io/FSharp.Charting">F# Charting</a> も必要になるため、
以下のような感じになります：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="prep">#I</span> <span class="s">&quot;</span><span class="s">.</span><span class="s">.</span><span class="s">/</span><span class="s">.</span><span class="s">.</span><span class="s">/</span><span class="s">.</span><span class="s">.</span><span class="s">/</span><span class="s">packages</span><span class="s">/</span><span class="s">FSharp</span><span class="s">.</span><span class="s">Charting</span><span class="s">.</span><span class="s">0</span><span class="s">.</span><span class="s">90</span><span class="s">.</span><span class="s">6</span><span class="s">&quot;</span>
<span class="prep">#I</span> <span class="s">&quot;</span><span class="s">.</span><span class="s">.</span><span class="s">/</span><span class="s">.</span><span class="s">.</span><span class="s">/</span><span class="s">.</span><span class="s">.</span><span class="s">/</span><span class="s">packages</span><span class="s">/</span><span class="s">Deedle</span><span class="s">.</span><span class="s">0</span><span class="s">.</span><span class="s">9</span><span class="s">.</span><span class="s">5</span><span class="s">&quot;</span>
<span class="prep">#load</span> <span class="s">&quot;</span><span class="s">FSharp</span><span class="s">.</span><span class="s">Charting</span><span class="s">.</span><span class="s">fsx</span><span class="s">&quot;</span>
<span class="prep">#load</span> <span class="s">&quot;</span><span class="s">Deedle</span><span class="s">.</span><span class="s">fsx</span><span class="s">&quot;</span>

<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">System</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="i">Deedle</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="i">FSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="i">Charting</span></pre>
</td>
</tr>
</table>

<a name="creating"></a>

<h2>シリーズおよびフレームの作成</h2>

<p>データフレームは一意な列名を持ったシリーズのコレクションです
(列名は実際には文字列である必要はありません)。
したがってデータフレームを作成するには、まず1つのシリーズを作成することになります：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// キーとなるシーケンスと値のシーケンスを作成します</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="i">dates</span>  <span class="o">=</span> 
  [ <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="i">DateTime</span>(<span class="n">2013</span>,<span class="n">1</span>,<span class="n">1</span>); 
    <span onmouseout="hideTip(event, 'fs6', 7)" onmouseover="showTip(event, 'fs6', 7)" class="i">DateTime</span>(<span class="n">2013</span>,<span class="n">1</span>,<span class="n">4</span>); 
    <span onmouseout="hideTip(event, 'fs6', 8)" onmouseover="showTip(event, 'fs6', 8)" class="i">DateTime</span>(<span class="n">2013</span>,<span class="n">1</span>,<span class="n">8</span>) ]
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs7', 9)" onmouseover="showTip(event, 'fs7', 9)" class="i">values</span> <span class="o">=</span> 
  [ <span class="n">10.0</span>; <span class="n">20.0</span>; <span class="n">30.0</span> ]
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs8', 10)" onmouseover="showTip(event, 'fs8', 10)" class="i">first</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 11)" onmouseover="showTip(event, 'fs9', 11)" class="i">Series</span>(<span onmouseout="hideTip(event, 'fs5', 12)" onmouseover="showTip(event, 'fs5', 12)" class="i">dates</span>, <span onmouseout="hideTip(event, 'fs7', 13)" onmouseover="showTip(event, 'fs7', 13)" class="i">values</span>)

<span class="c">// 観測対象となる1つのリストからシリーズを作成します</span>
<span onmouseout="hideTip(event, 'fs9', 14)" onmouseover="showTip(event, 'fs9', 14)" class="i">Series</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 15)" onmouseover="showTip(event, 'fs10', 15)" class="i">ofObservations</span>
  [ <span onmouseout="hideTip(event, 'fs6', 16)" onmouseover="showTip(event, 'fs6', 16)" class="i">DateTime</span>(<span class="n">2013</span>,<span class="n">1</span>,<span class="n">1</span>) <span class="o">=&gt;</span> <span class="n">10.0</span>
    <span onmouseout="hideTip(event, 'fs6', 17)" onmouseover="showTip(event, 'fs6', 17)" class="i">DateTime</span>(<span class="n">2013</span>,<span class="n">1</span>,<span class="n">4</span>) <span class="o">=&gt;</span> <span class="n">20.0</span>
    <span onmouseout="hideTip(event, 'fs6', 18)" onmouseover="showTip(event, 'fs6', 18)" class="i">DateTime</span>(<span class="n">2013</span>,<span class="n">1</span>,<span class="n">8</span>) <span class="o">=&gt;</span> <span class="n">30.0</span> ]</pre>
</td>
</tr>
</table>

<div class="deedleseries">

<table>
<thead>
<tr class="header">
<th><p>Keys</p></th>
<th><p>2013/01/01 0:00:00</p></th>
<th><p>2013/01/04 0:00:00</p></th>
<th><p>2013/01/08 0:00:00</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Values</p></td>
<td><p>10</p></td>
<td><p>20</p></td>
<td><p>30</p></td>
</tr>
</tbody>
</table>


</div>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// &#39;Series.ofObservations&#39; の省略バージョンです</span>
<span onmouseout="hideTip(event, 'fs11', 19)" onmouseover="showTip(event, 'fs11', 19)" class="i">series</span> [ <span class="n">1</span> <span class="o">=&gt;</span> <span class="n">1.0</span>; <span class="n">2</span> <span class="o">=&gt;</span> <span class="n">2.0</span> ]

<span class="c">// キーを明示的(かつ順番通り)に指定してシリーズを作成します</span>
<span onmouseout="hideTip(event, 'fs9', 20)" onmouseover="showTip(event, 'fs9', 20)" class="i">Series</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 21)" onmouseover="showTip(event, 'fs12', 21)" class="i">ofValues</span> [ <span class="n">10.0</span>; <span class="n">20.0</span>; <span class="n">30.0</span> ]</pre>
</td>
</tr>
</table>

<div class="deedleseries">

<table>
<thead>
<tr class="header">
<th><p>Keys</p></th>
<th><p>0</p></th>
<th><p>1</p></th>
<th><p>2</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Values</p></td>
<td><p>10</p></td>
<td><p>20</p></td>
<td><p>30</p></td>
</tr>
</tbody>
</table>


</div>

<p>シリーズの型はジェネリックである点に注意してください。
<code>Series&lt;K, T&gt;</code> はキーの型が <code>K</code> で、値の型が <code>T</code> です。
ではランダムな値を持った10日分のシリーズデータを生成してみましょう：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">/// &#39;first&#39; から &#39;count&#39; 日分の日付を生成します</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs13', 22)" onmouseover="showTip(event, 'fs13', 22)" class="i">dateRange</span> (<span onmouseout="hideTip(event, 'fs14', 23)" onmouseover="showTip(event, 'fs14', 23)" class="i">first</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs1', 24)" onmouseover="showTip(event, 'fs1', 24)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs6', 25)" onmouseover="showTip(event, 'fs6', 25)" class="i">DateTime</span>) <span onmouseout="hideTip(event, 'fs15', 26)" onmouseover="showTip(event, 'fs15', 26)" class="i">count</span> <span class="o">=</span> <span id="fst16" onmouseout="hideTip(event, 'fs16', 27)" onmouseover="showTip(event, 'fs16', 27, document.getElementById('fst16'))" class="omitted">(...)</span>

<span class="c">/// ランダムなdouble値を &#39;count&#39; 個生成します</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs17', 28)" onmouseover="showTip(event, 'fs17', 28)" class="i">rand</span> <span onmouseout="hideTip(event, 'fs15', 29)" onmouseover="showTip(event, 'fs15', 29)" class="i">count</span> <span class="o">=</span> <span id="fst18" onmouseout="hideTip(event, 'fs18', 30)" onmouseover="showTip(event, 'fs18', 30, document.getElementById('fst18'))" class="omitted">(...)</span>

<span class="c">// 10日分の値を持ったシリーズ</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs19', 31)" onmouseover="showTip(event, 'fs19', 31)" class="i">second</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 32)" onmouseover="showTip(event, 'fs9', 32)" class="i">Series</span>(<span onmouseout="hideTip(event, 'fs13', 33)" onmouseover="showTip(event, 'fs13', 33)" class="i">dateRange</span> (<span onmouseout="hideTip(event, 'fs6', 34)" onmouseover="showTip(event, 'fs6', 34)" class="i">DateTime</span>(<span class="n">2013</span>,<span class="n">1</span>,<span class="n">1</span>)) <span class="n">10</span>, <span onmouseout="hideTip(event, 'fs17', 35)" onmouseover="showTip(event, 'fs17', 35)" class="i">rand</span> <span class="n">10</span>)</pre>
</td>
</tr>
</table>

<div class="deedleseries">

<table>
<thead>
<tr class="header">
<th><p>Keys</p></th>
<th><p>2013/01/01 0:00:00</p></th>
<th><p>2013/01/02 0:00:00</p></th>
<th><p>2013/01/03 0:00:00</p></th>
<th><p>2013/01/04 0:00:00</p></th>
<th><p>2013/01/05 0:00:00</p></th>
<th><p> ... </p></th>
<th><p>2013/01/08 0:00:00</p></th>
<th><p>2013/01/09 0:00:00</p></th>
<th><p>2013/01/10 0:00:00</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Values</p></td>
<td><p>0.14</p></td>
<td><p>0.73</p></td>
<td><p>0.42</p></td>
<td><p>0.24</p></td>
<td><p>0.68</p></td>
<td><p> ... </p></td>
<td><p>0.72</p></td>
<td><p>0.05</p></td>
<td><p>0.06</p></td>
</tr>
</tbody>
</table>


</div>

<p>そうすると <code>first</code> と <code>second</code> という2つの列を持ち、
それぞれが列と同名の値を持つような
データフレームを簡単に作成できるようになります：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs20', 36)" onmouseover="showTip(event, 'fs20', 36)" class="i">df1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs21', 37)" onmouseover="showTip(event, 'fs21', 37)" class="i">Frame</span>([<span class="s">&quot;</span><span class="s">first</span><span class="s">&quot;</span>; <span class="s">&quot;</span><span class="s">second</span><span class="s">&quot;</span>], [<span onmouseout="hideTip(event, 'fs8', 38)" onmouseover="showTip(event, 'fs8', 38)" class="i">first</span>; <span onmouseout="hideTip(event, 'fs19', 39)" onmouseover="showTip(event, 'fs19', 39)" class="i">second</span>])</pre>
</td>
</tr>
</table>

<div class="deedleframe">

<table>
<thead>
<tr class="header">
<th></th>
<th><p>first</p></th>
<th><p>second</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>2013/01/01 0:00:00</p></td>
<td><p>10</p></td>
<td><p>0.135775934968039</p></td>
</tr>
<tr class="even">
<td><p>2013/01/02 0:00:00</p></td>
<td><p>N/A</p></td>
<td><p>0.730432359376192</p></td>
</tr>
<tr class="odd">
<td><p>2013/01/03 0:00:00</p></td>
<td><p>N/A</p></td>
<td><p>0.417471225567847</p></td>
</tr>
<tr class="even">
<td><p>2013/01/04 0:00:00</p></td>
<td><p>20</p></td>
<td><p>0.244610082937689</p></td>
</tr>
<tr class="odd">
<td><p>2013/01/05 0:00:00</p></td>
<td><p>N/A</p></td>
<td><p>0.682384274752058</p></td>
</tr>
<tr class="even">
<td><p>2013/01/06 0:00:00</p></td>
<td><p>N/A</p></td>
<td><p>0.499355857493056</p></td>
</tr>
<tr class="odd">
<td><p>2013/01/07 0:00:00</p></td>
<td><p>N/A</p></td>
<td><p>0.412972399225911</p></td>
</tr>
<tr class="even">
<td><p>2013/01/08 0:00:00</p></td>
<td><p>30</p></td>
<td><p>0.718848064410895</p></td>
</tr>
<tr class="odd">
<td><p>2013/01/09 0:00:00</p></td>
<td><p>N/A</p></td>
<td><p>0.0546751795591205</p></td>
</tr>
<tr class="even">
<td><p>2013/01/10 0:00:00</p></td>
<td><p>N/A</p></td>
<td><p>0.0642735660375438</p></td>
</tr>
</tbody>
</table>


</div>

<p>データフレームを表す型 <code>Frame&lt;TRowKey, TColumnKey&gt;</code> には2つのジェネリック引数があります。
1つめの引数は行キーを表す型で、先ほどの例では <code>DateTime</code> を明示的に指定しましたが、
指定しない場合には<code>int</code> 型になります。
2つめの引数は列キーの型です。
一般的には <code>string</code> ですが、日付を列キーにした転置バージョンのフレームを作成すると
便利な場合もあるでしょう。
データフレームには異種データを同梱させることができるため、値の型がない場合もあります。
この場合にはデータフレームからデータを取得する際に型を指定する必要があります。</p>

<p>出力結果からわかるように、フレームを作成すると2つのシリーズのインデックスが
自動的に結合されます(すべてのシリーズに含まれるすべての日付が結果に含まれるよう、
「外部結合(outer join)」が行われます)。
データフレームの <code>first</code> 列にはいくつか値無しのデータが含まれています。</p>

<p>また、さらに手軽なシンタックスを使って行データから、あるいは個別のデータから
フレームを作成することもできます：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// 先と同じ</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs22', 40)" onmouseover="showTip(event, 'fs22', 40)" class="i">df2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs21', 41)" onmouseover="showTip(event, 'fs21', 41)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs23', 42)" onmouseover="showTip(event, 'fs23', 42)" class="i">ofColumns</span> [<span class="s">&quot;</span><span class="s">first</span><span class="s">&quot;</span> <span class="o">=&gt;</span> <span onmouseout="hideTip(event, 'fs8', 43)" onmouseover="showTip(event, 'fs8', 43)" class="i">first</span>; <span class="s">&quot;</span><span class="s">second</span><span class="s">&quot;</span> <span class="o">=&gt;</span> <span onmouseout="hideTip(event, 'fs19', 44)" onmouseover="showTip(event, 'fs19', 44)" class="i">second</span>]

<span class="c">// 転置バージョン。ここでは行に&quot;first&quot;と&quot;second&quot;、列に日付が設定されます</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs24', 45)" onmouseover="showTip(event, 'fs24', 45)" class="i">df3</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs21', 46)" onmouseover="showTip(event, 'fs21', 46)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs25', 47)" onmouseover="showTip(event, 'fs25', 47)" class="i">ofRows</span> [<span class="s">&quot;</span><span class="s">first</span><span class="s">&quot;</span> <span class="o">=&gt;</span> <span onmouseout="hideTip(event, 'fs8', 48)" onmouseover="showTip(event, 'fs8', 48)" class="i">first</span>; <span class="s">&quot;</span><span class="s">second</span><span class="s">&quot;</span> <span class="o">=&gt;</span> <span onmouseout="hideTip(event, 'fs19', 49)" onmouseover="showTip(event, 'fs19', 49)" class="i">second</span>]

<span class="c">// 個別の値 (行 * 列 * 値) を指定してフレームを作成します</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 50)" onmouseover="showTip(event, 'fs26', 50)" class="i">df4</span> <span class="o">=</span> 
  [ (<span class="s">&quot;</span><span class="s">Monday</span><span class="s">&quot;</span>, <span class="s">&quot;</span><span class="s">Tomas</span><span class="s">&quot;</span>, <span class="n">1.0</span>); (<span class="s">&quot;</span><span class="s">Tuesday</span><span class="s">&quot;</span>, <span class="s">&quot;</span><span class="s">Adam</span><span class="s">&quot;</span>, <span class="n">2.1</span>)
    (<span class="s">&quot;</span><span class="s">Tuesday</span><span class="s">&quot;</span>, <span class="s">&quot;</span><span class="s">Tomas</span><span class="s">&quot;</span>, <span class="n">4.0</span>); (<span class="s">&quot;</span><span class="s">Wednesday</span><span class="s">&quot;</span>, <span class="s">&quot;</span><span class="s">Tomas</span><span class="s">&quot;</span>, <span class="o">-</span><span class="n">5.4</span>) ]
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 51)" onmouseover="showTip(event, 'fs21', 51)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs27', 52)" onmouseover="showTip(event, 'fs27', 52)" class="i">ofValues</span></pre>
</td>
</tr>
</table>

<p>データフレームはF#のレコード型(あるいはpublicで読み取り可能なプロパティを持った任意のクラス)の
コレクションからも簡単に作成できます。
<code>Frame.ofRecords</code> 関数を使用すると、レコードの名前とプロパティの型をリフレクションで探し出して、
同じ構造を持ったデータフレームを作成することができます。</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// &#39;Price&#39; というレコードと &#39;prices&#39; コレクションがあるとします</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs28', 53)" onmouseover="showTip(event, 'fs28', 53)" class="i">Price</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs29', 54)" onmouseover="showTip(event, 'fs29', 54)" class="i">Day</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs6', 55)" onmouseover="showTip(event, 'fs6', 55)" class="i">DateTime</span>; <span onmouseout="hideTip(event, 'fs30', 56)" onmouseover="showTip(event, 'fs30', 56)" class="i">Open</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs31', 57)" onmouseover="showTip(event, 'fs31', 57)" class="i">float</span> }
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs32', 58)" onmouseover="showTip(event, 'fs32', 58)" class="i">prices</span> <span class="o">=</span> 
  [ { <span class="i">Day</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 59)" onmouseover="showTip(event, 'fs6', 59)" class="i">DateTime</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 60)" onmouseover="showTip(event, 'fs33', 60)" class="i">Now</span>; <span class="i">Open</span> <span class="o">=</span> <span class="n">10.1</span> }
    { <span class="i">Day</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 61)" onmouseover="showTip(event, 'fs6', 61)" class="i">DateTime</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 62)" onmouseover="showTip(event, 'fs33', 62)" class="i">Now</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 63)" onmouseover="showTip(event, 'fs34', 63)" class="i">AddDays</span>(<span class="n">1.0</span>); <span class="i">Open</span> <span class="o">=</span> <span class="n">15.1</span> }
    { <span class="i">Day</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 64)" onmouseover="showTip(event, 'fs6', 64)" class="i">DateTime</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 65)" onmouseover="showTip(event, 'fs33', 65)" class="i">Now</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 66)" onmouseover="showTip(event, 'fs34', 66)" class="i">AddDays</span>(<span class="n">2.0</span>); <span class="i">Open</span> <span class="o">=</span> <span class="n">9.1</span> } ]

<span class="c">// &#39;Day&#39; と &#39;Open&#39; という列を持ったデータフレームを作成します</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs35', 67)" onmouseover="showTip(event, 'fs35', 67)" class="i">df5</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs21', 68)" onmouseover="showTip(event, 'fs21', 68)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs36', 69)" onmouseover="showTip(event, 'fs36', 69)" class="i">ofRecords</span> <span onmouseout="hideTip(event, 'fs32', 70)" onmouseover="showTip(event, 'fs32', 70)" class="i">prices</span></pre>
</td>
</tr>
</table>

<p>最後に、データフレームはCSVから読み取ることもできます：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs37', 71)" onmouseover="showTip(event, 'fs37', 71)" class="i">msftCsv</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs21', 72)" onmouseover="showTip(event, 'fs21', 72)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs38', 73)" onmouseover="showTip(event, 'fs38', 73)" class="i">ReadCsv</span>(<span class="k">__SOURCE_DIRECTORY__</span> <span class="o">+</span> <span class="s">&quot;</span><span class="s">/</span><span class="s">.</span><span class="s">.</span><span class="s">/</span><span class="s">data</span><span class="s">/</span><span class="s">stocks</span><span class="s">/</span><span class="s">MSFT</span><span class="s">.</span><span class="s">csv</span><span class="s">&quot;</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs39', 74)" onmouseover="showTip(event, 'fs39', 74)" class="i">fbCsv</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs21', 75)" onmouseover="showTip(event, 'fs21', 75)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs38', 76)" onmouseover="showTip(event, 'fs38', 76)" class="i">ReadCsv</span>(<span class="k">__SOURCE_DIRECTORY__</span> <span class="o">+</span> <span class="s">&quot;</span><span class="s">/</span><span class="s">.</span><span class="s">.</span><span class="s">/</span><span class="s">data</span><span class="s">/</span><span class="s">stocks</span><span class="s">/</span><span class="s">FB</span><span class="s">.</span><span class="s">csv</span><span class="s">&quot;</span>)</pre>
</td>
</tr>
</table>

<div class="deedleframe">

<table>
<thead>
<tr class="header">
<th></th>
<th><p>Date</p></th>
<th><p>Open</p></th>
<th><p>High</p></th>
<th><p> ... </p></th>
<th><p>Close</p></th>
<th><p>Volume</p></th>
<th><p>Adj Close</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>0</p></td>
<td><p>2013-11-07</p></td>
<td><p>49.24</p></td>
<td><p>49.87</p></td>
<td><p> ... </p></td>
<td><p>47.56</p></td>
<td><p>96925500</p></td>
<td><p>47.56</p></td>
</tr>
<tr class="even">
<td><p>1</p></td>
<td><p>2013-11-06</p></td>
<td><p>50.26</p></td>
<td><p>50.45</p></td>
<td><p> ... </p></td>
<td><p>49.12</p></td>
<td><p>67648600</p></td>
<td><p>49.12</p></td>
</tr>
<tr class="odd">
<td><p>2</p></td>
<td><p>2013-11-05</p></td>
<td><p>47.79</p></td>
<td><p>50.18</p></td>
<td><p> ... </p></td>
<td><p>50.11</p></td>
<td><p>76668300</p></td>
<td><p>50.11</p></td>
</tr>
<tr class="even">
<td><p>3</p></td>
<td><p>2013-11-04</p></td>
<td><p>49.37</p></td>
<td><p>49.75</p></td>
<td><p> ... </p></td>
<td><p>48.22</p></td>
<td><p>80206200</p></td>
<td><p>48.22</p></td>
</tr>
<tr class="odd">
<td><p>4</p></td>
<td><p>2013-11-01</p></td>
<td><p>50.85</p></td>
<td><p>52.09</p></td>
<td><p> ... </p></td>
<td><p>49.75</p></td>
<td><p>94822200</p></td>
<td><p>49.75</p></td>
</tr>
<tr class="even">
<td><p>5</p></td>
<td><p>2013-10-31</p></td>
<td><p>47.16</p></td>
<td><p>52.00</p></td>
<td><p> ... </p></td>
<td><p>50.21</p></td>
<td><p>248388200</p></td>
<td><p>50.21</p></td>
</tr>
<tr class="odd">
<td><p>6</p></td>
<td><p>2013-10-30</p></td>
<td><p>50.00</p></td>
<td><p>50.21</p></td>
<td><p> ... </p></td>
<td><p>49.01</p></td>
<td><p>116674400</p></td>
<td><p>49.01</p></td>
</tr>
<tr class="even">
<td><p>7</p></td>
<td><p>2013-10-29</p></td>
<td><p>50.73</p></td>
<td><p>50.79</p></td>
<td><p> ... </p></td>
<td><p>49.40</p></td>
<td><p>101859700</p></td>
<td><p>49.40</p></td>
</tr>
<tr class="odd">
<td><p> ... </p></td>
<td><p> ... </p></td>
<td><p> ... </p></td>
<td><p> ... </p></td>
<td><p> ... </p></td>
<td><p> ... </p></td>
<td><p> ... </p></td>
<td><p> ... </p></td>
</tr>
<tr class="even">
<td><p>367</p></td>
<td><p>2012-05-23</p></td>
<td><p>31.37</p></td>
<td><p>32.50</p></td>
<td><p> ... </p></td>
<td><p>32.00</p></td>
<td><p>73600000</p></td>
<td><p>32.00</p></td>
</tr>
<tr class="odd">
<td><p>368</p></td>
<td><p>2012-05-22</p></td>
<td><p>32.61</p></td>
<td><p>33.59</p></td>
<td><p> ... </p></td>
<td><p>31.00</p></td>
<td><p>101786600</p></td>
<td><p>31.00</p></td>
</tr>
<tr class="even">
<td><p>369</p></td>
<td><p>2012-05-21</p></td>
<td><p>36.53</p></td>
<td><p>36.66</p></td>
<td><p> ... </p></td>
<td><p>34.03</p></td>
<td><p>168192700</p></td>
<td><p>34.03</p></td>
</tr>
<tr class="odd">
<td><p>370</p></td>
<td><p>2012-05-18</p></td>
<td><p>42.05</p></td>
<td><p>45.00</p></td>
<td><p> ... </p></td>
<td><p>38.23</p></td>
<td><p>573576400</p></td>
<td><p>38.23</p></td>
</tr>
</tbody>
</table>


</div>

<p>データフレームはデータのロード時に値を解析して、
その値に最適な型を自動判別します。
しかし日付と時刻については自動変換は行われません。
どの日付型(<code>DateTime</code> や <code>DateTimeOffset</code> あるいは他のカスタム型)による表現が適切なのかを
ユーザーが決める必要があります。</p>

<a name="reindexing-and-joins"></a>

<h2>インデックスと結合を指定する</h2>

<p>ここまでで株価を含んだ <code>fbCsv</code> と <code>msftCsv</code> フレームを用意出来ましたが、
これらは数値順にインデックスされています。
つまりたとえば4番目の価格を取得するといったことができます。
しかしここでは日付順で並び替えようと思っています
(いくつか値無しのものが出てくるでしょう)。
そのためには行のインデックスを "Date" 列に設定します。
日付をインデックスに設定した後はインデックス順に並び替える必要があります。
Yahoo Financeの価格情報は新しいものから古いものの順で表示されていますが、
今回のデータフレームでは古いものから新しいものの昇順で表示させることにします。</p>

<p>フレームには順序付きインデックスがあるため、後で必要になる機能を追加しておきます
(たとえばインデックスとして明示的に含まれていないような日付を指定して
部分範囲を選択できるようにします)。</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// インデックスならびに行の順番としてDate列を使用します</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs40', 77)" onmouseover="showTip(event, 'fs40', 77)" class="i">msftOrd</span> <span class="o">=</span> 
  <span onmouseout="hideTip(event, 'fs37', 78)" onmouseover="showTip(event, 'fs37', 78)" class="i">msftCsv</span>
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 79)" onmouseover="showTip(event, 'fs21', 79)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs41', 80)" onmouseover="showTip(event, 'fs41', 80)" class="i">indexRowsDate</span> <span class="s">&quot;</span><span class="s">Date</span><span class="s">&quot;</span>
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 81)" onmouseover="showTip(event, 'fs21', 81)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs42', 82)" onmouseover="showTip(event, 'fs42', 82)" class="i">sortRowsByKey</span></pre>
</td>
</tr>
</table>

<p><code>indexRowsDate</code> 関数は <code>DateTime</code> 型の行を新しいインデックスとして使用します。
ライブラリには他にも一般的な型のインデックスに対する関数(たとえば <code>indexRowsInt</code>)や、
ジェネリック関数もあります。
ジェネリック関数を使用する場合、型アノテーションが必要になるため、
特定の型に対する関数を使用したほうがよいでしょう。
次は <code>Frame</code> モジュールにある別の関数を使用して行をソートします。
このモジュールにはどのような状況でも使用できるような、便利な関数が多数定義されています。
サポートされている機能を確認するために、関数のリストに目を通しておくことをおすすめします。</p>

<p>さてこれで正しくインデックスが付けられた株価が用意できたので、
関心のあるデータ(始値と終値)だけを含む新しいデータフレームを作成して、
それらの差分を表す新しい列を追加します：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// 始値(Open)と終値(Close)だけを含んだデータフレームを作成します</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs43', 83)" onmouseover="showTip(event, 'fs43', 83)" class="i">msft</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs40', 84)" onmouseover="showTip(event, 'fs40', 84)" class="i">msftOrd</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs44', 85)" onmouseover="showTip(event, 'fs44', 85)" class="i">Columns</span><span class="o">.</span>[ [<span class="s">&quot;</span><span class="s">Open</span><span class="s">&quot;</span>; <span class="s">&quot;</span><span class="s">Close</span><span class="s">&quot;</span>] ]

<span class="c">// 始値と終値の差分を含む新しい列を作成します</span>
<span onmouseout="hideTip(event, 'fs43', 86)" onmouseover="showTip(event, 'fs43', 86)" class="i">msft</span><span class="o">?</span><span class="i">Difference</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs43', 87)" onmouseover="showTip(event, 'fs43', 87)" class="i">msft</span><span class="o">?</span><span class="i">Open</span> <span class="o">-</span> <span onmouseout="hideTip(event, 'fs43', 88)" onmouseover="showTip(event, 'fs43', 88)" class="i">msft</span><span class="o">?</span><span class="i">Close</span>

<span class="c">// Facebookデータに対しても同じ処理を行います</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs45', 89)" onmouseover="showTip(event, 'fs45', 89)" class="i">fb</span> <span class="o">=</span> 
  <span onmouseout="hideTip(event, 'fs39', 90)" onmouseover="showTip(event, 'fs39', 90)" class="i">fbCsv</span>
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 91)" onmouseover="showTip(event, 'fs21', 91)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs41', 92)" onmouseover="showTip(event, 'fs41', 92)" class="i">indexRowsDate</span> <span class="s">&quot;</span><span class="s">Date</span><span class="s">&quot;</span>
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 93)" onmouseover="showTip(event, 'fs21', 93)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs42', 94)" onmouseover="showTip(event, 'fs42', 94)" class="i">sortRowsByKey</span>
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 95)" onmouseover="showTip(event, 'fs21', 95)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs46', 96)" onmouseover="showTip(event, 'fs46', 96)" class="i">sliceCols</span> [<span class="s">&quot;</span><span class="s">Open</span><span class="s">&quot;</span>; <span class="s">&quot;</span><span class="s">Close</span><span class="s">&quot;</span>]
<span onmouseout="hideTip(event, 'fs45', 97)" onmouseover="showTip(event, 'fs45', 97)" class="i">fb</span><span class="o">?</span><span class="i">Difference</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs45', 98)" onmouseover="showTip(event, 'fs45', 98)" class="i">fb</span><span class="o">?</span><span class="i">Open</span> <span class="o">-</span> <span onmouseout="hideTip(event, 'fs45', 99)" onmouseover="showTip(event, 'fs45', 99)" class="i">fb</span><span class="o">?</span><span class="i">Close</span>

<span class="c">// これで差分を簡単にプロットできるようになります</span>
<span onmouseout="hideTip(event, 'fs47', 100)" onmouseover="showTip(event, 'fs47', 100)" class="i">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs48', 101)" onmouseover="showTip(event, 'fs48', 101)" class="i">Combine</span>
  [ <span onmouseout="hideTip(event, 'fs47', 102)" onmouseover="showTip(event, 'fs47', 102)" class="i">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs49', 103)" onmouseover="showTip(event, 'fs49', 103)" class="i">Line</span>(<span onmouseout="hideTip(event, 'fs43', 104)" onmouseover="showTip(event, 'fs43', 104)" class="i">msft</span><span class="o">?</span><span class="i">Difference</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 105)" onmouseover="showTip(event, 'fs9', 105)" class="i">Series</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs50', 106)" onmouseover="showTip(event, 'fs50', 106)" class="i">observations</span>) 
    <span onmouseout="hideTip(event, 'fs47', 107)" onmouseover="showTip(event, 'fs47', 107)" class="i">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs49', 108)" onmouseover="showTip(event, 'fs49', 108)" class="i">Line</span>(<span onmouseout="hideTip(event, 'fs45', 109)" onmouseover="showTip(event, 'fs45', 109)" class="i">fb</span><span class="o">?</span><span class="i">Difference</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 110)" onmouseover="showTip(event, 'fs9', 110)" class="i">Series</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs50', 111)" onmouseover="showTip(event, 'fs50', 111)" class="i">observations</span>) ]</pre>
</td>
</tr>
</table>

<p><img src="/Deedle/ja\../images/chart4.png" alt="Chart" /></p>

<p><code>f.Columns.[ .. ]</code> として列を選択すると、(既に行ったように)列のリスト、
あるいは単一の列キー、あるいは(関連づけられたインデックスが順序を持つのであれば)
単一の範囲として扱うことができます。
そして <code>df?Column &lt;- (...)</code> というシンタックスを使用すると、
データフレームに新しい列を追加できます。
これはデータフレームでサポートされている唯一の可変操作です。
その他の操作では新規作成されたデータフレームが結果として返されます。</p>

<p>次にMicrosoftとFacebook両方の(適切にアラインされた)データを含む
単一のデータフレームを作成します。
そのためには <code>Join</code> メソッドを使用します。
ただしその前に、キーの重複は許容されていないため、それぞれの列名を変更します：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// 列名が一意になるように変更します</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs51', 112)" onmouseover="showTip(event, 'fs51', 112)" class="i">msftNames</span> <span class="o">=</span> [<span class="s">&quot;</span><span class="s">MsftOpen</span><span class="s">&quot;</span>; <span class="s">&quot;</span><span class="s">MsftClose</span><span class="s">&quot;</span>; <span class="s">&quot;</span><span class="s">MsftDiff</span><span class="s">&quot;</span>]
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 113)" onmouseover="showTip(event, 'fs52', 113)" class="i">msftRen</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs43', 114)" onmouseover="showTip(event, 'fs43', 114)" class="i">msft</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 115)" onmouseover="showTip(event, 'fs21', 115)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs53', 116)" onmouseover="showTip(event, 'fs53', 116)" class="i">indexColsWith</span> <span onmouseout="hideTip(event, 'fs51', 117)" onmouseover="showTip(event, 'fs51', 117)" class="i">msftNames</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs54', 118)" onmouseover="showTip(event, 'fs54', 118)" class="i">fbNames</span> <span class="o">=</span> [<span class="s">&quot;</span><span class="s">FbOpen</span><span class="s">&quot;</span>; <span class="s">&quot;</span><span class="s">FbClose</span><span class="s">&quot;</span>; <span class="s">&quot;</span><span class="s">FbDiff</span><span class="s">&quot;</span>]
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs55', 119)" onmouseover="showTip(event, 'fs55', 119)" class="i">fbRen</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs45', 120)" onmouseover="showTip(event, 'fs45', 120)" class="i">fb</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 121)" onmouseover="showTip(event, 'fs21', 121)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs53', 122)" onmouseover="showTip(event, 'fs53', 122)" class="i">indexColsWith</span> <span onmouseout="hideTip(event, 'fs54', 123)" onmouseover="showTip(event, 'fs54', 123)" class="i">fbNames</span>

<span class="c">// 外部結合 (値無しを含みつつ、アラインおよびフィルを行います)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 124)" onmouseover="showTip(event, 'fs56', 124)" class="i">joinedOut</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs52', 125)" onmouseover="showTip(event, 'fs52', 125)" class="i">msftRen</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs57', 126)" onmouseover="showTip(event, 'fs57', 126)" class="i">Join</span>(<span onmouseout="hideTip(event, 'fs55', 127)" onmouseover="showTip(event, 'fs55', 127)" class="i">fbRen</span>, <span class="i">kind</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs58', 128)" onmouseover="showTip(event, 'fs58', 128)" class="i">JoinKind</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs59', 129)" onmouseover="showTip(event, 'fs59', 129)" class="i">Outer</span>)

<span class="c">// 内部結合 (値無しの行を削除します)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs60', 130)" onmouseover="showTip(event, 'fs60', 130)" class="i">joinedIn</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs52', 131)" onmouseover="showTip(event, 'fs52', 131)" class="i">msftRen</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs57', 132)" onmouseover="showTip(event, 'fs57', 132)" class="i">Join</span>(<span onmouseout="hideTip(event, 'fs55', 133)" onmouseover="showTip(event, 'fs55', 133)" class="i">fbRen</span>, <span class="i">kind</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs58', 134)" onmouseover="showTip(event, 'fs58', 134)" class="i">JoinKind</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs61', 135)" onmouseover="showTip(event, 'fs61', 135)" class="i">Inner</span>)

<span class="c">// 有効な値だけを対象にして、日ごとの差分を可視化します</span>
<span onmouseout="hideTip(event, 'fs47', 136)" onmouseover="showTip(event, 'fs47', 136)" class="i">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs62', 137)" onmouseover="showTip(event, 'fs62', 137)" class="i">Rows</span>
  [ <span onmouseout="hideTip(event, 'fs47', 138)" onmouseover="showTip(event, 'fs47', 138)" class="i">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs49', 139)" onmouseover="showTip(event, 'fs49', 139)" class="i">Line</span>(<span onmouseout="hideTip(event, 'fs60', 140)" onmouseover="showTip(event, 'fs60', 140)" class="i">joinedIn</span><span class="o">?</span><span class="i">MsftDiff</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 141)" onmouseover="showTip(event, 'fs9', 141)" class="i">Series</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs50', 142)" onmouseover="showTip(event, 'fs50', 142)" class="i">observations</span>) 
    <span onmouseout="hideTip(event, 'fs47', 143)" onmouseover="showTip(event, 'fs47', 143)" class="i">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs49', 144)" onmouseover="showTip(event, 'fs49', 144)" class="i">Line</span>(<span onmouseout="hideTip(event, 'fs60', 145)" onmouseover="showTip(event, 'fs60', 145)" class="i">joinedIn</span><span class="o">?</span><span class="i">FbDiff</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 146)" onmouseover="showTip(event, 'fs9', 146)" class="i">Series</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs50', 147)" onmouseover="showTip(event, 'fs50', 147)" class="i">observations</span>) ]</pre>
</td>
</tr>
</table>

<p><img src="/Deedle/ja\../images/chart5.png" alt="Chart" /></p>

<a name="selecting"></a>

<h2>値の選択とスライシング</h2>

<p>データフレームにはデータアクセス時に使用できる主要なプロパティが2つあります。
<code>Rows</code> プロパティはそれぞれの行を(シリーズとして)含んだシリーズを返し、
<code>Columns</code> プロパティはそれぞれの列を(シリーズとして)含んだシリーズを返します。
これらのシリーズに対して様々な方法でインデックス化
あるいはスライシングを行うことができます：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// 特定の日付の行を確認します</span>
<span onmouseout="hideTip(event, 'fs60', 148)" onmouseover="showTip(event, 'fs60', 148)" class="i">joinedIn</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 149)" onmouseover="showTip(event, 'fs63', 149)" class="i">Rows</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs6', 150)" onmouseover="showTip(event, 'fs6', 150)" class="i">DateTime</span>(<span class="n">2013</span>, <span class="n">1</span>, <span class="n">2</span>)]
<span class="fsi">val it : ObjectSeries&lt;string&gt; =</span>
<span class="fsi">  FbOpen    -&gt; 28.00   </span>
<span class="fsi">  FbClose   -&gt; 27.44   </span>
<span class="fsi">  FbDiff    -&gt; -0.5599 </span>
<span class="fsi">  MsftOpen  -&gt; 27.62   </span>
<span class="fsi">  MsftClose -&gt; 27.25   </span>
<span class="fsi">  MsftDiff  -&gt; -0.3700 </span>

<span class="c">// 2013年1月2日のFacebookの始値を取得します</span>
<span onmouseout="hideTip(event, 'fs60', 151)" onmouseover="showTip(event, 'fs60', 151)" class="i">joinedIn</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 152)" onmouseover="showTip(event, 'fs63', 152)" class="i">Rows</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs6', 153)" onmouseover="showTip(event, 'fs6', 153)" class="i">DateTime</span>(<span class="n">2013</span>, <span class="n">1</span>, <span class="n">2</span>)]<span class="o">?</span><span class="i">FbOpen</span>
<span class="fsi">val it : float = 28.0</span></pre>
</td>
</tr>
</table>

<p>最初の式における返り値の型は <code>ObjectSeries&lt;string&gt;</code> で、
この型は <code>Series&lt;string, obj&gt;</code> から派生したもので、
型無しのシリーズを表します。
特定のキーに対する値を取得して、必要になる型に変換するためには
<code>GetAs&lt;int&gt;("FbOpen")</code> メソッド(または <code>TryGetAs</code> )を使用します。
型無しシリーズではデフォルトの <code>?</code> 演算子
(静的に既知の値型を使用して値を返す演算子)が隠ぺいされて、
代わりに任意の値を <code>float</code> へと自動変換する <code>?</code> 演算子が用意されます。</p>

<p>先の例では単一キーのインデクサを使用しました。
しかし複数キーを(リストとして)指定したり、
(スライシングの文法を使用して)範囲を指定したりすることもできます：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// 2013年1月の月初め3日の値を取得します</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs64', 154)" onmouseover="showTip(event, 'fs64', 154)" class="i">janDates</span> <span class="o">=</span> [ <span class="k">for</span> <span onmouseout="hideTip(event, 'fs65', 155)" onmouseover="showTip(event, 'fs65', 155)" class="i">d</span> <span class="k">in</span> <span class="n">2</span> <span class="o">..</span> <span class="n">4</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs6', 156)" onmouseover="showTip(event, 'fs6', 156)" class="i">DateTime</span>(<span class="n">2013</span>, <span class="n">1</span>, <span onmouseout="hideTip(event, 'fs65', 157)" onmouseover="showTip(event, 'fs65', 157)" class="i">d</span>) ]
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs66', 158)" onmouseover="showTip(event, 'fs66', 158)" class="i">jan234</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs60', 159)" onmouseover="showTip(event, 'fs60', 159)" class="i">joinedIn</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 160)" onmouseover="showTip(event, 'fs63', 160)" class="i">Rows</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs64', 161)" onmouseover="showTip(event, 'fs64', 161)" class="i">janDates</span>]

<span class="c">// 3日間の始値の平均を計算します</span>
<span onmouseout="hideTip(event, 'fs66', 162)" onmouseover="showTip(event, 'fs66', 162)" class="i">jan234</span><span class="o">?</span><span class="i">MsftOpen</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs67', 163)" onmouseover="showTip(event, 'fs67', 163)" class="i">Stats</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs68', 164)" onmouseover="showTip(event, 'fs68', 164)" class="i">mean</span>

<span class="c">// 2013年1月全体の値を取得します</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs69', 165)" onmouseover="showTip(event, 'fs69', 165)" class="i">jan</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs60', 166)" onmouseover="showTip(event, 'fs60', 166)" class="i">joinedIn</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 167)" onmouseover="showTip(event, 'fs63', 167)" class="i">Rows</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs6', 168)" onmouseover="showTip(event, 'fs6', 168)" class="i">DateTime</span>(<span class="n">2013</span>, <span class="n">1</span>, <span class="n">1</span>) <span class="o">..</span> <span onmouseout="hideTip(event, 'fs6', 169)" onmouseover="showTip(event, 'fs6', 169)" class="i">DateTime</span>(<span class="n">2013</span>, <span class="n">1</span>, <span class="n">31</span>)] </pre>
</td>
</tr>
</table>

<pre><code>Value 'Frame.map(round (jan*100.0))/100.0 |&gt; Frame.mapRowKeys (fun dt -&gt; dt.ToShortDateString())' could not be evaluated
</code></pre>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// 月全体の平均を計算します</span>
<span onmouseout="hideTip(event, 'fs69', 170)" onmouseover="showTip(event, 'fs69', 170)" class="i">jan</span><span class="o">?</span><span class="i">FbOpen</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs67', 171)" onmouseover="showTip(event, 'fs67', 171)" class="i">Stats</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs68', 172)" onmouseover="showTip(event, 'fs68', 172)" class="i">mean</span>
<span onmouseout="hideTip(event, 'fs69', 173)" onmouseover="showTip(event, 'fs69', 173)" class="i">jan</span><span class="o">?</span><span class="i">MsftOpen</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs67', 174)" onmouseover="showTip(event, 'fs67', 174)" class="i">Stats</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs68', 175)" onmouseover="showTip(event, 'fs68', 175)" class="i">mean</span></pre>
</td>
</tr>
</table>

<p>(先の例のように)単一の日付を指定した場合のインデックス演算子の結果は単一のデータシリーズ、
複数のインデックスや(今回の例のように)範囲を指定した場合の結果は新しいデータフレームになります。</p>

<p>今回使用した <code>Series</code> モジュールには、 <code>mean</code> <code>sdv</code> <code>sum</code> など、
データシリーズに対する便利な統計用関数が定義されています。</p>

<p>なお範囲を指定したスライシング(2番目の例)では
1月1日から31日までの日付シーケンスが実際に生成されているわけではない点に注意してください。
これら2つの日付がインデックスとして渡されているだけです。
データフレームには順序付きインデックスがあるため、
1月1日よりも大きく、1月31日よりも小さいすべてのキーがインデックスによって検索されるというわけです
(ただしここには問題があります。
返されたデータフレームには1月1日のデータが含まれておらず、1月2日から始まっています。)</p>

<a name="timeseries"></a>

<h2>時系列データを使用する</h2>

<p>既に説明したように、順序付きのシリーズまたはデータフレームがあれば、
様々な方法でデータを並び替えることができます。
先の例では厳密一致ではなく、下限上限を指定してスライシングしました。
同様に、ダイレクトルックアップを行う場合には
指定した値に最も近い小さな(あるいは大きな)要素を取得することもできます。</p>

<p>たとえば10日分10個のデータを持った2つのシリーズを用意します。
<code>daysSeries</code> は <code>DateTime.Today</code> (午前 12:00) を始点とするキーを持ち、
<code>obsSeries</code> は 現在の時刻が設定された日付をキーに持つようにします
(これは間違った表現ですが、アイディアとしては伝わるはずです)：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs70', 176)" onmouseover="showTip(event, 'fs70', 176)" class="i">daysSeries</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 177)" onmouseover="showTip(event, 'fs9', 177)" class="i">Series</span>(<span onmouseout="hideTip(event, 'fs13', 178)" onmouseover="showTip(event, 'fs13', 178)" class="i">dateRange</span> <span onmouseout="hideTip(event, 'fs6', 179)" onmouseover="showTip(event, 'fs6', 179)" class="i">DateTime</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs71', 180)" onmouseover="showTip(event, 'fs71', 180)" class="i">Today</span> <span class="n">10</span>, <span onmouseout="hideTip(event, 'fs17', 181)" onmouseover="showTip(event, 'fs17', 181)" class="i">rand</span> <span class="n">10</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs72', 182)" onmouseover="showTip(event, 'fs72', 182)" class="i">obsSeries</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 183)" onmouseover="showTip(event, 'fs9', 183)" class="i">Series</span>(<span onmouseout="hideTip(event, 'fs13', 184)" onmouseover="showTip(event, 'fs13', 184)" class="i">dateRange</span> <span onmouseout="hideTip(event, 'fs6', 185)" onmouseover="showTip(event, 'fs6', 185)" class="i">DateTime</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 186)" onmouseover="showTip(event, 'fs33', 186)" class="i">Now</span> <span class="n">10</span>, <span onmouseout="hideTip(event, 'fs17', 187)" onmouseover="showTip(event, 'fs17', 187)" class="i">rand</span> <span class="n">10</span>)</pre>
</td>
</tr>
</table>

<div class="deedleseries">

<table>
<thead>
<tr class="header">
<th><p>Keys</p></th>
<th><p>2014/05/20 0:00:00</p></th>
<th><p>2014/05/21 0:00:00</p></th>
<th><p>2014/05/22 0:00:00</p></th>
<th><p>2014/05/23 0:00:00</p></th>
<th><p>2014/05/24 0:00:00</p></th>
<th><p> ... </p></th>
<th><p>2014/05/27 0:00:00</p></th>
<th><p>2014/05/28 0:00:00</p></th>
<th><p>2014/05/29 0:00:00</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Values</p></td>
<td><p>0.42</p></td>
<td><p>0.97</p></td>
<td><p>0.3</p></td>
<td><p>0.24</p></td>
<td><p>0.92</p></td>
<td><p> ... </p></td>
<td><p>0.59</p></td>
<td><p>0.94</p></td>
<td><p>0.19</p></td>
</tr>
</tbody>
</table>


</div>

<div class="deedleseries">

<table>
<thead>
<tr class="header">
<th><p>Keys</p></th>
<th><p>2014/05/20 13:41:26</p></th>
<th><p>2014/05/21 13:41:26</p></th>
<th><p>2014/05/22 13:41:26</p></th>
<th><p>2014/05/23 13:41:26</p></th>
<th><p>2014/05/24 13:41:26</p></th>
<th><p> ... </p></th>
<th><p>2014/05/27 13:41:26</p></th>
<th><p>2014/05/28 13:41:26</p></th>
<th><p>2014/05/29 13:41:26</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Values</p></td>
<td><p>0.42</p></td>
<td><p>0.97</p></td>
<td><p>0.3</p></td>
<td><p>0.24</p></td>
<td><p>0.92</p></td>
<td><p> ... </p></td>
<td><p>0.59</p></td>
<td><p>0.94</p></td>
<td><p>0.19</p></td>
</tr>
</tbody>
</table>


</div>

<p><code>daysSeries.[date]</code> というインデックス演算子は <strong>厳密な</strong> 意味を持つため、
正確な日付が参照できない場合にはエラーになります。
一方、 <code>Get</code> メソッドには要求された動作を指定するための引数があります：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// 現在の時刻に対応するデータは無いのでエラーになります。</span>
<span class="k">try</span> <span onmouseout="hideTip(event, 'fs70', 188)" onmouseover="showTip(event, 'fs70', 188)" class="i">daysSeries</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs6', 189)" onmouseover="showTip(event, 'fs6', 189)" class="i">DateTime</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 190)" onmouseover="showTip(event, 'fs33', 190)" class="i">Now</span>] <span class="k">with</span> _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs73', 191)" onmouseover="showTip(event, 'fs73', 191)" class="i">nan</span>
<span class="k">try</span> <span onmouseout="hideTip(event, 'fs72', 192)" onmouseover="showTip(event, 'fs72', 192)" class="i">obsSeries</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs6', 193)" onmouseover="showTip(event, 'fs6', 193)" class="i">DateTime</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 194)" onmouseover="showTip(event, 'fs33', 194)" class="i">Now</span>] <span class="k">with</span> _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs73', 195)" onmouseover="showTip(event, 'fs73', 195)" class="i">nan</span>

<span class="c">// 動作します。DateTime.Today (12:00 AM)に対応する値が取得できます。</span>
<span onmouseout="hideTip(event, 'fs70', 196)" onmouseover="showTip(event, 'fs70', 196)" class="i">daysSeries</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs74', 197)" onmouseover="showTip(event, 'fs74', 197)" class="i">Get</span>(<span onmouseout="hideTip(event, 'fs6', 198)" onmouseover="showTip(event, 'fs6', 198)" class="i">DateTime</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 199)" onmouseover="showTip(event, 'fs33', 199)" class="i">Now</span>, <span onmouseout="hideTip(event, 'fs75', 200)" onmouseover="showTip(event, 'fs75', 200)" class="i">Lookup</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs76', 201)" onmouseover="showTip(event, 'fs76', 201)" class="i">ExactOrSmaller</span>)
<span class="c">// 動作しません。Today (12:00 AM) 以前で最も近いキーは存在しません。</span>
<span class="k">try</span> <span onmouseout="hideTip(event, 'fs72', 202)" onmouseover="showTip(event, 'fs72', 202)" class="i">obsSeries</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs74', 203)" onmouseover="showTip(event, 'fs74', 203)" class="i">Get</span>(<span onmouseout="hideTip(event, 'fs6', 204)" onmouseover="showTip(event, 'fs6', 204)" class="i">DateTime</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs71', 205)" onmouseover="showTip(event, 'fs71', 205)" class="i">Today</span>, <span onmouseout="hideTip(event, 'fs75', 206)" onmouseover="showTip(event, 'fs75', 206)" class="i">Lookup</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs76', 207)" onmouseover="showTip(event, 'fs76', 207)" class="i">ExactOrSmaller</span>)
<span class="k">with</span> _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs73', 208)" onmouseover="showTip(event, 'fs73', 208)" class="i">nan</span></pre>
</td>
</tr>
</table>

<p>(option値を取得する) <code>TryGet</code> あるいは
(1度に複数のキーを指定してルックアップを行う) <code>GetItems</code> を呼ぶ場合にも、
同じように動作を指定できます。
なおこの動作は順序付きインデックスを持ったシリーズまたはフレームに対してのみ
有効である点に注意してください。
順序が無い場合はすべての操作が厳密一致になります。</p>

<p>データフレームをleft joinまたはright joinする場合にも指定できます。
デモとして、1と2というインデックスをそれぞれ持った
2つのデータフレームを用意してみます：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs77', 209)" onmouseover="showTip(event, 'fs77', 209)" class="i">daysFrame</span> <span class="o">=</span> [ <span class="n">1</span> <span class="o">=&gt;</span> <span onmouseout="hideTip(event, 'fs70', 210)" onmouseover="showTip(event, 'fs70', 210)" class="i">daysSeries</span> ] <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 211)" onmouseover="showTip(event, 'fs21', 211)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs23', 212)" onmouseover="showTip(event, 'fs23', 212)" class="i">ofColumns</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs78', 213)" onmouseover="showTip(event, 'fs78', 213)" class="i">obsFrame</span> <span class="o">=</span> [ <span class="n">2</span> <span class="o">=&gt;</span> <span onmouseout="hideTip(event, 'fs72', 214)" onmouseover="showTip(event, 'fs72', 214)" class="i">obsSeries</span> ] <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 215)" onmouseover="showTip(event, 'fs21', 215)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs23', 216)" onmouseover="showTip(event, 'fs23', 216)" class="i">ofColumns</span>

<span class="c">// 列2にあるすべての値は(一致する時間が無いため)値無しです</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs79', 217)" onmouseover="showTip(event, 'fs79', 217)" class="i">obsDaysExact</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs77', 218)" onmouseover="showTip(event, 'fs77', 218)" class="i">daysFrame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs57', 219)" onmouseover="showTip(event, 'fs57', 219)" class="i">Join</span>(<span onmouseout="hideTip(event, 'fs78', 220)" onmouseover="showTip(event, 'fs78', 220)" class="i">obsFrame</span>, <span class="i">kind</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs58', 221)" onmouseover="showTip(event, 'fs58', 221)" class="i">JoinKind</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs80', 222)" onmouseover="showTip(event, 'fs80', 222)" class="i">Left</span>)

<span class="c">// すべての値が有効です。</span>
<span class="c">// 各日付において、やや経過した時間に対して最も近い小さな値をキーとする値を取得しています。</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs81', 223)" onmouseover="showTip(event, 'fs81', 223)" class="i">obsDaysPrev</span> <span class="o">=</span> 
  (<span onmouseout="hideTip(event, 'fs77', 224)" onmouseover="showTip(event, 'fs77', 224)" class="i">daysFrame</span>, <span onmouseout="hideTip(event, 'fs78', 225)" onmouseover="showTip(event, 'fs78', 225)" class="i">obsFrame</span>) 
  <span class="o">||&gt;</span> <span onmouseout="hideTip(event, 'fs21', 226)" onmouseover="showTip(event, 'fs21', 226)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs82', 227)" onmouseover="showTip(event, 'fs82', 227)" class="i">joinAlign</span> <span onmouseout="hideTip(event, 'fs58', 228)" onmouseover="showTip(event, 'fs58', 228)" class="i">JoinKind</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs80', 229)" onmouseover="showTip(event, 'fs80', 229)" class="i">Left</span> <span onmouseout="hideTip(event, 'fs75', 230)" onmouseover="showTip(event, 'fs75', 230)" class="i">Lookup</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs76', 231)" onmouseover="showTip(event, 'fs76', 231)" class="i">ExactOrSmaller</span>

<span class="c">// 1番目の値は値無しですが、2番目以降は有効な値です</span>
<span class="c">// (1番目のデータは最も小さなキーであるため、</span>
<span class="c">// それよりも最も近くて大きい値は存在しません)。</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs83', 232)" onmouseover="showTip(event, 'fs83', 232)" class="i">obsDaysNext</span> <span class="o">=</span>
  (<span onmouseout="hideTip(event, 'fs77', 233)" onmouseover="showTip(event, 'fs77', 233)" class="i">daysFrame</span>, <span onmouseout="hideTip(event, 'fs78', 234)" onmouseover="showTip(event, 'fs78', 234)" class="i">obsFrame</span>) 
  <span class="o">||&gt;</span> <span onmouseout="hideTip(event, 'fs21', 235)" onmouseover="showTip(event, 'fs21', 235)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs82', 236)" onmouseover="showTip(event, 'fs82', 236)" class="i">joinAlign</span> <span onmouseout="hideTip(event, 'fs58', 237)" onmouseover="showTip(event, 'fs58', 237)" class="i">JoinKind</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs80', 238)" onmouseover="showTip(event, 'fs80', 238)" class="i">Left</span> <span onmouseout="hideTip(event, 'fs75', 239)" onmouseover="showTip(event, 'fs75', 239)" class="i">Lookup</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs84', 240)" onmouseover="showTip(event, 'fs84', 240)" class="i">ExactOrGreater</span></pre>
</td>
</tr>
</table>

<p>一般的に、 <code>Series</code> や <code>Frame</code> モジュール内の関数を使用して行えることは
いずれもオブジェクトのメンバー(あるいは拡張メンバー)を使用しても
行うことができるようになっています。
先の例では両方を使用しました。
まずオプション引数を指定した <code>Join</code> をメンバーメソッドとして呼び出した後、
<code>joinAlign</code> 関数を呼び出しました。
好みに応じてどちらを使用しても構いません。
今回は(ページに収まらないような長い式を記述するのではなく)
コードをパイプライン化したかったので <code>joinAlign</code> を使用しました</p>

<p><code>Join</code> メソッドには2つのオプション引数を指定できます。
引数 <code>?lookup</code> は <code>?kind</code> が <code>Left</code> と <code>Right</code> の
いずれでもない場合には無視されます。
また、データフレームに順序が無い場合には厳密一致のデフォルト動作になります。
<code>joinAlign</code> 関数も同様です。</p>

<a name="projections"></a>

<h2>射影とフィルタリング</h2>

<p>シリーズに対するフィルタリング(filtering)と射影(projection)は
それぞれ <code>Where</code> と <code>Select</code> メソッドで行うことができます。
またこれらのメソッドには <code>Series.map</code> と <code>Series.filter</code> 関数が対応します。
(値またはキーのいずれか一方だけを対象に変換したい場合には
<code>Series.mapValues</code> や <code>Series.mapKeys</code> 関数も使用できます)。</p>

<p>これらのメソッドは直接データフレームに対して呼び出せないため、
(対象に応じて) <code>df.Rows</code> または <code>df.Columns</code> と記述する必要があります。
なお <code>Frame</code> モジュールにも <code>Frame.mapRows</code> という同じような関数があります。
以下のコードでは株価の高い方の名前
("FB"または"MSFT")を含んだ新しい列を追加しています：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span onmouseout="hideTip(event, 'fs56', 241)" onmouseover="showTip(event, 'fs56', 241)" class="i">joinedOut</span><span class="o">?</span><span onmouseout="hideTip(event, 'fs85', 242)" onmouseover="showTip(event, 'fs85', 242)" class="i">Comparison</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs56', 243)" onmouseover="showTip(event, 'fs56', 243)" class="i">joinedOut</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 244)" onmouseover="showTip(event, 'fs21', 244)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs86', 245)" onmouseover="showTip(event, 'fs86', 245)" class="i">mapRowValues</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs87', 246)" onmouseover="showTip(event, 'fs87', 246)" class="i">row</span> <span class="k">-&gt;</span> 
  <span class="k">if</span> <span onmouseout="hideTip(event, 'fs87', 247)" onmouseover="showTip(event, 'fs87', 247)" class="i">row</span><span class="o">?</span><span class="i">MsftOpen</span> <span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs87', 248)" onmouseover="showTip(event, 'fs87', 248)" class="i">row</span><span class="o">?</span><span class="i">FbOpen</span> <span class="k">then</span> <span class="s">&quot;</span><span class="s">MSFT</span><span class="s">&quot;</span> <span class="k">else</span> <span class="s">&quot;</span><span class="s">FB</span><span class="s">&quot;</span>)</pre>
</td>
</tr>
</table>

<p>行を射影またはフィルタリングする場合、値無しのデータに注意する必要があります。
行に対するアクセサー <code>row?MsftOpen</code> は特定の列の値を読み取ります
(そしてその値を<code>float</code>に変換します)が、列の値が無効な場合には
<code>MissingValueException</code> 例外がすろーされます。
<code>mapRowValues</code> のような射影関数ではこの例外が自動的にキャッチされて、
対応するシリーズの値が値無しだとマークされます
(ただしこれ以外の型の例外はキャッチされません)。</p>

<p>値無しに対する処理をより明示的に行う場合には <code>Series.hasAll ["MsfOpen"; "FbOpen"]</code>
として、必要な値がすべてシリーズにあるかどうかをチェックするようにします。
もし値が無いのであればラムダ関数で <code>null</code> を返すようにします。
そうするとそれが自動的に値無しだとみなされるようになります
(そして以降の操作で処理対象から外されることになるでしょう)。</p>

<p>さてこれでMicrosoftの株価がFacebookを上回った日数、
あるいはその逆の日数を取得できるようになりました：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span onmouseout="hideTip(event, 'fs56', 249)" onmouseover="showTip(event, 'fs56', 249)" class="i">joinedOut</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs88', 250)" onmouseover="showTip(event, 'fs88', 250)" class="i">GetColumn</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs89', 251)" onmouseover="showTip(event, 'fs89', 251)" class="i">string</span><span class="o">&gt;</span>(<span class="s">&quot;</span><span class="s">Comparison</span><span class="s">&quot;</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 252)" onmouseover="showTip(event, 'fs9', 252)" class="i">Series</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs90', 253)" onmouseover="showTip(event, 'fs90', 253)" class="i">filterValues</span> ((<span class="o">=</span>) <span class="s">&quot;</span><span class="s">MSFT</span><span class="s">&quot;</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 254)" onmouseover="showTip(event, 'fs9', 254)" class="i">Series</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs91', 255)" onmouseover="showTip(event, 'fs91', 255)" class="i">countValues</span>
<span class="fsi">val it : int = 220</span>

<span onmouseout="hideTip(event, 'fs56', 256)" onmouseover="showTip(event, 'fs56', 256)" class="i">joinedOut</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs88', 257)" onmouseover="showTip(event, 'fs88', 257)" class="i">GetColumn</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs89', 258)" onmouseover="showTip(event, 'fs89', 258)" class="i">string</span><span class="o">&gt;</span>(<span class="s">&quot;</span><span class="s">Comparison</span><span class="s">&quot;</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 259)" onmouseover="showTip(event, 'fs9', 259)" class="i">Series</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs90', 260)" onmouseover="showTip(event, 'fs90', 260)" class="i">filterValues</span> ((<span class="o">=</span>) <span class="s">&quot;</span><span class="s">FB</span><span class="s">&quot;</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 261)" onmouseover="showTip(event, 'fs9', 261)" class="i">Series</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs91', 262)" onmouseover="showTip(event, 'fs91', 262)" class="i">countValues</span>
<span class="fsi">val it : int = 103</span></pre>
</td>
</tr>
</table>

<p>この場合には、有効な行しか含まれなくなる
<code>joinedIn</code> を使用したほうがよかったかもしれません。
しかし値無しを含むデータフレームを処理することも多いため、
この方法を確認しておくことには意味があります。
別の方法も紹介しましょう：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// &#39;Open&#39;列だけを含むデータフレームを取得します</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs92', 263)" onmouseover="showTip(event, 'fs92', 263)" class="i">joinedOpens</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs56', 264)" onmouseover="showTip(event, 'fs56', 264)" class="i">joinedOut</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs44', 265)" onmouseover="showTip(event, 'fs44', 265)" class="i">Columns</span><span class="o">.</span>[ [<span class="s">&quot;</span><span class="s">MsftOpen</span><span class="s">&quot;</span>; <span class="s">&quot;</span><span class="s">FbOpen</span><span class="s">&quot;</span>] ]

<span class="c">// 値無しを含まない行だけを取得すれば</span>
<span class="c">// 安全にフィルタおよびカウントできます</span>
<span onmouseout="hideTip(event, 'fs92', 266)" onmouseover="showTip(event, 'fs92', 266)" class="i">joinedOpens</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs93', 267)" onmouseover="showTip(event, 'fs93', 267)" class="i">RowsDense</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 268)" onmouseover="showTip(event, 'fs9', 268)" class="i">Series</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs90', 269)" onmouseover="showTip(event, 'fs90', 269)" class="i">filterValues</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs87', 270)" onmouseover="showTip(event, 'fs87', 270)" class="i">row</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs87', 271)" onmouseover="showTip(event, 'fs87', 271)" class="i">row</span><span class="o">?</span><span class="i">MsftOpen</span> <span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs87', 272)" onmouseover="showTip(event, 'fs87', 272)" class="i">row</span><span class="o">?</span><span class="i">FbOpen</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 273)" onmouseover="showTip(event, 'fs9', 273)" class="i">Series</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs91', 274)" onmouseover="showTip(event, 'fs91', 274)" class="i">countValues</span></pre>
</td>
</tr>
</table>

<p>ポイントは6行目にある <code>RowsDense</code> の部分です。
これは <code>Rows</code> と同じような動作をしますが、
値無しを含まない行だけを返すという違いがあります。
したがって、チェックせずとも安全にフィルタリングを実行できるというわけです。</p>

<p>しかし <code>FbClose</code> 列は必要としていないため、
この列に値無しが含まれていても問題にはなりません。
そのため、元のデータフレームから必要な2つの列だけを射影して、
最初に <code>joinedOpens</code> を作成しているというわけです。</p>

<a name="grouping"></a>

<h2>グループ化と集計</h2>

<p>最後にグループ化(grouping)と集計(aggregation)について簡単に紹介します。
時系列データのグループ化に関する詳細については
<a href="series.html">時系列機能のチュートリアル</a> を参照してください。
また、 <a href="frame.html">データフレームの機能</a> には
順序無しのフレームに対するグループ化に関する説明があります。</p>

<p>ここでは <code>Frame.groupRowsUsing</code> という一番単純な機能を紹介します
(<code>GroupRowsUsing</code> メンバーメソッドもあります)。
この関数には各行における新しいキーを選択するキーセレクタを指定できます。
列内の値を使用してデータをグループ化したい場合には
<code>Frame.groupRowsBy column</code> というようにします。</p>

<p>以下のスニペットでは行を月および年でグループ化しています：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs94', 275)" onmouseover="showTip(event, 'fs94', 275)" class="i">monthly</span> <span class="o">=</span>
  <span onmouseout="hideTip(event, 'fs60', 276)" onmouseover="showTip(event, 'fs60', 276)" class="i">joinedIn</span>
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 277)" onmouseover="showTip(event, 'fs21', 277)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs95', 278)" onmouseover="showTip(event, 'fs95', 278)" class="i">groupRowsUsing</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs96', 279)" onmouseover="showTip(event, 'fs96', 279)" class="i">k</span> _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs6', 280)" onmouseover="showTip(event, 'fs6', 280)" class="i">DateTime</span>(<span onmouseout="hideTip(event, 'fs96', 281)" onmouseover="showTip(event, 'fs96', 281)" class="i">k</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs97', 282)" onmouseover="showTip(event, 'fs97', 282)" class="i">Year</span>, <span onmouseout="hideTip(event, 'fs96', 283)" onmouseover="showTip(event, 'fs96', 283)" class="i">k</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs98', 284)" onmouseover="showTip(event, 'fs98', 284)" class="i">Month</span>, <span class="n">1</span>))

<span class="fsi">val monthly : Frame&lt;(DateTime * DateTime),string&gt; =</span>
<span class="fsi"> </span>
<span class="fsi">                        FbOpen  MsftOpen </span>
<span class="fsi">  5/1/2012 5/18/2012 -&gt; 38.23   29.27    </span>
<span class="fsi">           5/21/2012 -&gt; 34.03   29.75    </span>
<span class="fsi">           5/22/2012 -&gt; 31.00   29.76    </span>
<span class="fsi">  :                     ...              </span>
<span class="fsi">  8/1/2013 8/12/2013 -&gt; 38.22   32.87    </span>
<span class="fsi">           8/13/2013 -&gt; 37.02   32.23    </span>
<span class="fsi">           8/14/2013 -&gt; 36.65   32.35    </span></pre>
</td>
</tr>
</table>

<p>出力結果はページに収まるように省略してあります。
見ての通り、 <code>DateTime * DateTime</code> のタプルを行のキーとするような
データフレームが返されます。
このデータフレームは <strong>階層的</strong> (あるいはマルチレベル) インデックスとして
扱うことができます。
たとえば出力結果では(正しく順序づけられているとすれば)
自動的に複数行がグループとして表示されます</p>

<p>階層的インデックスに対しては様々な操作が可能です。
たとえば特定のグループ(2013年5月)に含まれる行を取得して、
グループ内の列の平均を計算することができます：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span onmouseout="hideTip(event, 'fs94', 285)" onmouseover="showTip(event, 'fs94', 285)" class="i">monthly</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs99', 286)" onmouseover="showTip(event, 'fs99', 286)" class="i">Rows</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs6', 287)" onmouseover="showTip(event, 'fs6', 287)" class="i">DateTime</span>(<span class="n">2013</span>,<span class="n">5</span>,<span class="n">1</span>), <span class="o">*</span>] <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs67', 288)" onmouseover="showTip(event, 'fs67', 288)" class="i">Stats</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs68', 289)" onmouseover="showTip(event, 'fs68', 289)" class="i">mean</span>
<span class="fsi">val it : Series&lt;string,float&gt; =</span>
<span class="fsi">  FbOpen    -&gt; 26.14 </span>
<span class="fsi">  FbClose   -&gt; 26.35 </span>
<span class="fsi">  FbDiff    -&gt; 0.20  </span>
<span class="fsi">  MsftOpen  -&gt; 33.95 </span>
<span class="fsi">  MsftClose -&gt; 33.76 </span>
<span class="fsi">  MsftDiff  -&gt; -0.19 </span></pre>
</td>
</tr>
</table>

<p>このスニペットではF# 3.1 (Visual Studio 2013)以降で
利用可能なスライシング記法を使用しています。
以前のバージョンであれば
<code>monthly.Rows.[Lookup1Of2 (DateTime(2013,5,1))]</code> とすれば同じ動作になります。
これはキーの1番目だけを指定して、
2番目のコンポーネントは任意のものでよいということを示しています。
<code>Frame.getNumericColumns</code> と <code>Stats.levelMean</code> を組み合わせて
第1レベルの全グループの平均を取得することもできます：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span onmouseout="hideTip(event, 'fs94', 290)" onmouseover="showTip(event, 'fs94', 290)" class="i">monthly</span> 
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 291)" onmouseover="showTip(event, 'fs21', 291)" class="i">Frame</span><span class="o">.</span><span class="i">getNumericColumns</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 292)" onmouseover="showTip(event, 'fs9', 292)" class="i">Series</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs100', 293)" onmouseover="showTip(event, 'fs100', 293)" class="i">mapValues</span> (<span onmouseout="hideTip(event, 'fs67', 294)" onmouseover="showTip(event, 'fs67', 294)" class="i">Stats</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs101', 295)" onmouseover="showTip(event, 'fs101', 295)" class="i">levelMean</span> <span onmouseout="hideTip(event, 'fs102', 296)" onmouseover="showTip(event, 'fs102', 296)" class="i">fst</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs21', 297)" onmouseover="showTip(event, 'fs21', 297)" class="i">Frame</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs23', 298)" onmouseover="showTip(event, 'fs23', 298)" class="i">ofColumns</span></pre>
</td>
</tr>
</table>

<p>ここでは単にキーがタプルであることを利用しました。
<code>fst</code> 関数はキー(月および年)の1番目の日付を射影するため、
第1レベルのキーを含み、有効な数値列すべての平均値を持ったフレームが結果として返されます。</p>

<div class="tip" id="fs1">namespace System</div>
<div class="tip" id="fs2">namespace Deedle</div>
<div class="tip" id="fs3">namespace FSharp</div>
<div class="tip" id="fs4">namespace FSharp.Charting</div>
<div class="tip" id="fs5">val dates : DateTime list<br /><br />Full name: Tutorial.dates</div>
<div class="tip" id="fs6">Multiple items<br />type DateTime =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;new : ticks:int64 -&gt; DateTime + 10 overloads<br />&#160;&#160;&#160;&#160;member Add : value:TimeSpan -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddDays : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddHours : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddMilliseconds : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddMinutes : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddMonths : months:int -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddSeconds : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddTicks : value:int64 -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddYears : value:int -&gt; DateTime<br />&#160;&#160;&#160;&#160;...<br />&#160;&#160;end<br /><br />Full name: System.DateTime<br /><br />--------------------<br />DateTime()<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(ticks: int64) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(ticks: int64, kind: DateTimeKind) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, calendar: Globalization.Calendar) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, kind: DateTimeKind) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, calendar: Globalization.Calendar) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, millisecond: int) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, millisecond: int, kind: DateTimeKind) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em></div>
<div class="tip" id="fs7">val values : float list<br /><br />Full name: Tutorial.values</div>
<div class="tip" id="fs8">val first : Series&lt;DateTime,float&gt;<br /><br />Full name: Tutorial.first</div>
<div class="tip" id="fs9">Multiple items<br />module Series<br /><br />from Deedle<br /><br />--------------------<br />type Series =<br />&#160;&#160;static member ofNullables : values:seq&lt;Nullable&lt;&#39;a0&gt;&gt; -&gt; Series&lt;int,&#39;a0&gt; (requires default constructor and value type and &#39;a0 :&gt; ValueType)<br />&#160;&#160;static member ofObservations : observations:seq&lt;&#39;a0 * &#39;a1&gt; -&gt; Series&lt;&#39;a0,&#39;a1&gt; (requires equality)<br />&#160;&#160;static member ofOptionalObservations : observations:seq&lt;&#39;K * &#39;a1 option&gt; -&gt; Series&lt;&#39;K,&#39;a1&gt; (requires equality)<br />&#160;&#160;static member ofValues : values:seq&lt;&#39;a0&gt; -&gt; Series&lt;int,&#39;a0&gt;<br /><br />Full name: Deedle.FSharpSeriesExtensions.Series<br /><br />--------------------<br />type Series&lt;&#39;K,&#39;V (requires equality)&gt; =<br />&#160;&#160;interface IFsiFormattable<br />&#160;&#160;interface ISeries&lt;&#39;K&gt;<br />&#160;&#160;new : pairs:seq&lt;KeyValuePair&lt;&#39;K,&#39;V&gt;&gt; -&gt; Series&lt;&#39;K,&#39;V&gt;<br />&#160;&#160;new : keys:seq&lt;&#39;K&gt; * values:seq&lt;&#39;V&gt; -&gt; Series&lt;&#39;K,&#39;V&gt;<br />&#160;&#160;new : index:IIndex&lt;&#39;K&gt; * vector:IVector&lt;&#39;V&gt; * vectorBuilder:IVectorBuilder * indexBuilder:IIndexBuilder -&gt; Series&lt;&#39;K,&#39;V&gt;<br />&#160;&#160;member After : lowerExclusive:&#39;K -&gt; Series&lt;&#39;K,&#39;V&gt;<br />&#160;&#160;member Aggregate : aggregation:Aggregation&lt;&#39;K&gt; * observationSelector:Func&lt;DataSegment&lt;Series&lt;&#39;K,&#39;V&gt;&gt;,KeyValuePair&lt;&#39;TNewKey,OptionalValue&lt;&#39;R&gt;&gt;&gt; -&gt; Series&lt;&#39;TNewKey,&#39;R&gt; (requires equality)<br />&#160;&#160;member Aggregate : aggregation:Aggregation&lt;&#39;K&gt; * keySelector:Func&lt;DataSegment&lt;Series&lt;&#39;K,&#39;V&gt;&gt;,&#39;TNewKey&gt; * valueSelector:Func&lt;DataSegment&lt;Series&lt;&#39;K,&#39;V&gt;&gt;,OptionalValue&lt;&#39;R&gt;&gt; -&gt; Series&lt;&#39;TNewKey,&#39;R&gt; (requires equality)<br />&#160;&#160;member AsyncMaterialize : unit -&gt; Async&lt;Series&lt;&#39;K,&#39;V&gt;&gt;<br />&#160;&#160;member Before : upperExclusive:&#39;K -&gt; Series&lt;&#39;K,&#39;V&gt;<br />&#160;&#160;...<br /><br />Full name: Deedle.Series&lt;_,_&gt;<br /><br />--------------------<br />new : pairs:seq&lt;Collections.Generic.KeyValuePair&lt;&#39;K,&#39;V&gt;&gt; -&gt; Series&lt;&#39;K,&#39;V&gt;<br />new : keys:seq&lt;&#39;K&gt; * values:seq&lt;&#39;V&gt; -&gt; Series&lt;&#39;K,&#39;V&gt;<br />new : index:Indices.IIndex&lt;&#39;K&gt; * vector:IVector&lt;&#39;V&gt; * vectorBuilder:Vectors.IVectorBuilder * indexBuilder:Indices.IIndexBuilder -&gt; Series&lt;&#39;K,&#39;V&gt;</div>
<div class="tip" id="fs10">static member Series.ofObservations : observations:seq&lt;&#39;a0 * &#39;a1&gt; -&gt; Series&lt;&#39;a0,&#39;a1&gt; (requires equality)</div>
<div class="tip" id="fs11">val series : observations:seq&lt;&#39;a * &#39;b&gt; -&gt; Series&lt;&#39;a,&#39;b&gt; (requires equality)<br /><br />Full name: Deedle.FSharpSeriesExtensions.series</div>
<div class="tip" id="fs12">static member Series.ofValues : values:seq&lt;&#39;a0&gt; -&gt; Series&lt;int,&#39;a0&gt;</div>
<div class="tip" id="fs13">val dateRange : first:DateTime -&gt; count:int -&gt; seq&lt;DateTime&gt;<br /><br />Full name: Tutorial.dateRange<br /><em><br /><br />&#160;&#39;first&#39; から &#39;count&#39; 日分の日付を生成します</em></div>
<div class="tip" id="fs14">val first : DateTime</div>
<div class="tip" id="fs15">val count : int</div>
<div class="tip" id="fs16">seq { for i in 0 .. (count - 1) -&gt; first.AddDays(float i) }</div>
<div class="tip" id="fs17">val rand : count:int -&gt; seq&lt;float&gt;<br /><br />Full name: Tutorial.rand<br /><em><br /><br />&#160;ランダムなdouble値を &#39;count&#39; 個生成します</em></div>
<div class="tip" id="fs18">let rnd = System.Random()<br />&#160;&#160;seq { for i in 0 .. (count - 1) -&gt; rnd.NextDouble() }</div>
<div class="tip" id="fs19">val second : Series&lt;DateTime,float&gt;<br /><br />Full name: Tutorial.second</div>
<div class="tip" id="fs20">val df1 : Frame&lt;DateTime,string&gt;<br /><br />Full name: Tutorial.df1</div>
<div class="tip" id="fs21">Multiple items<br />module Frame<br /><br />from Deedle<br /><br />--------------------<br />type Frame =<br />&#160;&#160;static member CreateEmpty : unit -&gt; Frame&lt;&#39;R,&#39;C&gt; (requires equality and equality)<br />&#160;&#160;static member FromArray2D : array:&#39;T [,] -&gt; Frame&lt;int,int&gt;<br />&#160;&#160;static member FromColumns : cols:Series&lt;&#39;TColKey,Series&lt;&#39;TRowKey,&#39;V&gt;&gt; -&gt; Frame&lt;&#39;TRowKey,&#39;TColKey&gt; (requires equality and equality)<br />&#160;&#160;static member FromColumns : cols:Series&lt;&#39;TColKey,ObjectSeries&lt;&#39;TRowKey&gt;&gt; -&gt; Frame&lt;&#39;TRowKey,&#39;TColKey&gt; (requires equality and equality)<br />&#160;&#160;static member FromColumns : columns:seq&lt;KeyValuePair&lt;&#39;ColKey,ObjectSeries&lt;&#39;RowKey&gt;&gt;&gt; -&gt; Frame&lt;&#39;RowKey,&#39;ColKey&gt; (requires equality and equality)<br />&#160;&#160;static member FromColumns : columns:seq&lt;KeyValuePair&lt;&#39;ColKey,Series&lt;&#39;RowKey,&#39;V&gt;&gt;&gt; -&gt; Frame&lt;&#39;RowKey,&#39;ColKey&gt; (requires equality and equality)<br />&#160;&#160;static member FromColumns : rows:seq&lt;Series&lt;&#39;ColKey,&#39;V&gt;&gt; -&gt; Frame&lt;&#39;ColKey,int&gt; (requires equality)<br />&#160;&#160;static member FromRecords : values:seq&lt;&#39;T&gt; -&gt; Frame&lt;int,string&gt;<br />&#160;&#160;static member FromRecords : series:Series&lt;&#39;K,&#39;R&gt; -&gt; Frame&lt;&#39;K,string&gt; (requires equality)<br />&#160;&#160;static member FromRowKeys : keys:seq&lt;&#39;K&gt; -&gt; Frame&lt;&#39;K,string&gt; (requires equality)<br />&#160;&#160;...<br /><br />Full name: Deedle.Frame<br /><br />--------------------<br />type Frame&lt;&#39;TRowKey,&#39;TColumnKey (requires equality and equality)&gt; =<br />&#160;&#160;interface IDynamicMetaObjectProvider<br />&#160;&#160;interface INotifyCollectionChanged<br />&#160;&#160;interface IFsiFormattable<br />&#160;&#160;interface IFrame<br />&#160;&#160;new : names:seq&lt;&#39;TColumnKey&gt; * columns:seq&lt;ISeries&lt;&#39;TRowKey&gt;&gt; -&gt; Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt;<br />&#160;&#160;private new : rowIndex:IIndex&lt;&#39;TRowKey&gt; * columnIndex:IIndex&lt;&#39;TColumnKey&gt; * data:IVector&lt;IVector&gt; -&gt; Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt;<br />&#160;&#160;member AddColumn : column:&#39;TColumnKey * series:ISeries&lt;&#39;TRowKey&gt; -&gt; unit<br />&#160;&#160;member AddColumn : column:&#39;TColumnKey * series:seq&lt;&#39;V&gt; -&gt; unit<br />&#160;&#160;member AddColumn : column:&#39;TColumnKey * series:ISeries&lt;&#39;TRowKey&gt; * lookup:Lookup -&gt; unit<br />&#160;&#160;member AddColumn : column:&#39;TColumnKey * series:seq&lt;&#39;V&gt; * lookup:Lookup -&gt; unit<br />&#160;&#160;...<br /><br />Full name: Deedle.Frame&lt;_,_&gt;<br /><br />--------------------<br />new : names:seq&lt;&#39;TColumnKey&gt; * columns:seq&lt;ISeries&lt;&#39;TRowKey&gt;&gt; -&gt; Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt;</div>
<div class="tip" id="fs22">val df2 : Frame&lt;DateTime,string&gt;<br /><br />Full name: Tutorial.df2</div>
<div class="tip" id="fs23">static member Frame.ofColumns : cols:Series&lt;&#39;a0,#ISeries&lt;&#39;a2&gt;&gt; -&gt; Frame&lt;&#39;a2,&#39;a0&gt; (requires equality and equality)<br />static member Frame.ofColumns : cols:seq&lt;&#39;a0 * #ISeries&lt;&#39;K&gt;&gt; -&gt; Frame&lt;&#39;K,&#39;a0&gt; (requires equality and equality)</div>
<div class="tip" id="fs24">val df3 : Frame&lt;string,DateTime&gt;<br /><br />Full name: Tutorial.df3</div>
<div class="tip" id="fs25">static member Frame.ofRows : rows:seq&lt;&#39;a0 * #ISeries&lt;&#39;a2&gt;&gt; -&gt; Frame&lt;&#39;a0,&#39;a2&gt; (requires equality and equality)<br />static member Frame.ofRows : rows:Series&lt;&#39;a0,#ISeries&lt;&#39;a2&gt;&gt; -&gt; Frame&lt;&#39;a0,&#39;a2&gt; (requires equality and equality)</div>
<div class="tip" id="fs26">val df4 : Frame&lt;string,string&gt;<br /><br />Full name: Tutorial.df4</div>
<div class="tip" id="fs27">static member Frame.ofValues : values:seq&lt;&#39;a0 * &#39;a1 * &#39;a2&gt; -&gt; Frame&lt;&#39;a0,&#39;a1&gt; (requires equality and equality)</div>
<div class="tip" id="fs28">type Price =<br />&#160;&#160;{Day: DateTime;<br />&#160;&#160;&#160;Open: float;}<br /><br />Full name: Tutorial.Price</div>
<div class="tip" id="fs29">Price.Day: DateTime</div>
<div class="tip" id="fs30">Price.Open: float</div>
<div class="tip" id="fs31">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs32">val prices : Price list<br /><br />Full name: Tutorial.prices</div>
<div class="tip" id="fs33">property DateTime.Now: DateTime</div>
<div class="tip" id="fs34">DateTime.AddDays(value: float) : DateTime</div>
<div class="tip" id="fs35">val df5 : Frame&lt;int,string&gt;<br /><br />Full name: Tutorial.df5</div>
<div class="tip" id="fs36">static member Frame.ofRecords : series:Series&lt;&#39;K,&#39;R&gt; -&gt; Frame&lt;&#39;K,string&gt; (requires equality)<br />static member Frame.ofRecords : values:seq&lt;&#39;T&gt; -&gt; Frame&lt;int,string&gt;</div>
<div class="tip" id="fs37">val msftCsv : Frame&lt;int,string&gt;<br /><br />Full name: Tutorial.msftCsv</div>
<div class="tip" id="fs38">static member Frame.ReadCsv : path:string * ?hasHeaders:bool * ?inferTypes:bool * ?inferRows:int * ?schema:string * ?separators:string * ?culture:string * ?maxRows:int -&gt; Frame&lt;int,string&gt;<br />static member Frame.ReadCsv : stream:IO.Stream * ?hasHeaders:bool * ?inferTypes:bool * ?inferRows:int * ?schema:string * ?separators:string * ?culture:string * ?maxRows:int -&gt; Frame&lt;int,string&gt;</div>
<div class="tip" id="fs39">val fbCsv : Frame&lt;int,string&gt;<br /><br />Full name: Tutorial.fbCsv</div>
<div class="tip" id="fs40">val msftOrd : Frame&lt;DateTime,string&gt;<br /><br />Full name: Tutorial.msftOrd</div>
<div class="tip" id="fs41">val indexRowsDate : column:&#39;C -&gt; frame:Frame&lt;&#39;R1,&#39;C&gt; -&gt; Frame&lt;DateTime,&#39;C&gt; (requires equality and equality)<br /><br />Full name: Deedle.Frame.indexRowsDate</div>
<div class="tip" id="fs42">val sortRowsByKey : frame:Frame&lt;&#39;R,&#39;C&gt; -&gt; Frame&lt;&#39;R,&#39;C&gt; (requires equality and equality)<br /><br />Full name: Deedle.Frame.sortRowsByKey</div>
<div class="tip" id="fs43">val msft : Frame&lt;DateTime,string&gt;<br /><br />Full name: Tutorial.msft</div>
<div class="tip" id="fs44">property Frame.Columns: ColumnSeries&lt;DateTime,string&gt;</div>
<div class="tip" id="fs45">val fb : Frame&lt;DateTime,string&gt;<br /><br />Full name: Tutorial.fb</div>
<div class="tip" id="fs46">val sliceCols : columns:seq&lt;&#39;C&gt; -&gt; frame:Frame&lt;&#39;R,&#39;C&gt; -&gt; Frame&lt;&#39;R,&#39;C&gt; (requires equality and equality)<br /><br />Full name: Deedle.Frame.sliceCols</div>
<div class="tip" id="fs47">type Chart =<br />&#160;&#160;static member Area : data:seq&lt;#value&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Color * ?XTitle:string * ?YTitle:string -&gt; GenericChart<br />&#160;&#160;static member Area : data:seq&lt;#key * #value&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Color * ?XTitle:string * ?YTitle:string -&gt; GenericChart<br />&#160;&#160;static member Bar : data:seq&lt;#value&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Color * ?XTitle:string * ?YTitle:string -&gt; GenericChart<br />&#160;&#160;static member Bar : data:seq&lt;#key * #value&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Color * ?XTitle:string * ?YTitle:string -&gt; GenericChart<br />&#160;&#160;static member BoxPlotFromData : data:seq&lt;#key * #seq&lt;&#39;a2&gt;&gt; * ?Name:string * ?Title:string * ?Color:Color * ?XTitle:string * ?YTitle:string * ?Percentile:int * ?ShowAverage:bool * ?ShowMedian:bool * ?ShowUnusualValues:bool * ?WhiskerPercentile:int -&gt; GenericChart (requires &#39;a2 :&gt; value)<br />&#160;&#160;static member BoxPlotFromStatistics : data:seq&lt;#key * #value * #value * #value * #value * #value * #value&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Color * ?XTitle:string * ?YTitle:string * ?Percentile:int * ?ShowAverage:bool * ?ShowMedian:bool * ?ShowUnusualValues:bool * ?WhiskerPercentile:int -&gt; GenericChart<br />&#160;&#160;static member Bubble : data:seq&lt;#value * #value&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Color * ?XTitle:string * ?YTitle:string * ?BubbleMaxSize:int * ?BubbleMinSize:int * ?BubbleScaleMax:float * ?BubbleScaleMin:float * ?UseSizeForLabel:bool -&gt; GenericChart<br />&#160;&#160;static member Bubble : data:seq&lt;#key * #value * #value&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Color * ?XTitle:string * ?YTitle:string * ?BubbleMaxSize:int * ?BubbleMinSize:int * ?BubbleScaleMax:float * ?BubbleScaleMin:float * ?UseSizeForLabel:bool -&gt; GenericChart<br />&#160;&#160;static member Candlestick : data:seq&lt;#value * #value * #value * #value&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Color * ?XTitle:string * ?YTitle:string -&gt; CandlestickChart<br />&#160;&#160;static member Candlestick : data:seq&lt;#key * #value * #value * #value * #value&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Color * ?XTitle:string * ?YTitle:string -&gt; CandlestickChart<br />&#160;&#160;...<br /><br />Full name: FSharp.Charting.Chart</div>
<div class="tip" id="fs48">static member Chart.Combine : charts:seq&lt;ChartTypes.GenericChart&gt; -&gt; ChartTypes.GenericChart</div>
<div class="tip" id="fs49">static member Chart.Line : data:seq&lt;#value&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Drawing.Color * ?XTitle:string * ?YTitle:string -&gt; ChartTypes.GenericChart<br />static member Chart.Line : data:seq&lt;#key * #value&gt; * ?Name:string * ?Title:string * ?Labels:#seq&lt;string&gt; * ?Color:Drawing.Color * ?XTitle:string * ?YTitle:string -&gt; ChartTypes.GenericChart</div>
<div class="tip" id="fs50">val observations : series:Series&lt;&#39;K,&#39;T&gt; -&gt; seq&lt;&#39;K * &#39;T&gt; (requires equality)<br /><br />Full name: Deedle.Series.observations</div>
<div class="tip" id="fs51">val msftNames : string list<br /><br />Full name: Tutorial.msftNames</div>
<div class="tip" id="fs52">val msftRen : Frame&lt;DateTime,string&gt;<br /><br />Full name: Tutorial.msftRen</div>
<div class="tip" id="fs53">val indexColsWith : keys:seq&lt;&#39;C2&gt; -&gt; frame:Frame&lt;&#39;R,&#39;C1&gt; -&gt; Frame&lt;&#39;R,&#39;C2&gt; (requires equality and equality and equality)<br /><br />Full name: Deedle.Frame.indexColsWith</div>
<div class="tip" id="fs54">val fbNames : string list<br /><br />Full name: Tutorial.fbNames</div>
<div class="tip" id="fs55">val fbRen : Frame&lt;DateTime,string&gt;<br /><br />Full name: Tutorial.fbRen</div>
<div class="tip" id="fs56">val joinedOut : Frame&lt;DateTime,string&gt;<br /><br />Full name: Tutorial.joinedOut</div>
<div class="tip" id="fs57">member Frame.Join : otherFrame:Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt; -&gt; Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt;<br />member Frame.Join : colKey:&#39;TColumnKey * series:Series&lt;&#39;TRowKey,&#39;V&gt; -&gt; Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt;<br />member Frame.Join : otherFrame:Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt; * kind:JoinKind -&gt; Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt;<br />member Frame.Join : colKey:&#39;TColumnKey * series:Series&lt;&#39;TRowKey,&#39;V&gt; * kind:JoinKind -&gt; Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt;<br />member Frame.Join : otherFrame:Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt; * kind:JoinKind * lookup:Lookup -&gt; Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt;<br />member Frame.Join : colKey:&#39;TColumnKey * series:Series&lt;&#39;TRowKey,&#39;V&gt; * kind:JoinKind * lookup:Lookup -&gt; Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt;</div>
<div class="tip" id="fs58">type JoinKind =<br />&#160;&#160;|  Outer  =  0<br />&#160;&#160;|  Inner  =  1<br />&#160;&#160;|  Left  =  2<br />&#160;&#160;|  Right  =  3<br /><br />Full name: Deedle.JoinKind</div>
<div class="tip" id="fs59">JoinKind.Outer: JoinKind = 0</div>
<div class="tip" id="fs60">val joinedIn : Frame&lt;DateTime,string&gt;<br /><br />Full name: Tutorial.joinedIn</div>
<div class="tip" id="fs61">JoinKind.Inner: JoinKind = 1</div>
<div class="tip" id="fs62">static member Chart.Rows : charts:seq&lt;ChartTypes.GenericChart&gt; -&gt; ChartTypes.GenericChart</div>
<div class="tip" id="fs63">property Frame.Rows: RowSeries&lt;DateTime,string&gt;</div>
<div class="tip" id="fs64">val janDates : DateTime list<br /><br />Full name: Tutorial.janDates</div>
<div class="tip" id="fs65">val d : int</div>
<div class="tip" id="fs66">val jan234 : Frame&lt;DateTime,string&gt;<br /><br />Full name: Tutorial.jan234</div>
<div class="tip" id="fs67">type Stats =<br />&#160;&#160;static member count : frame:Frame&lt;&#39;R,&#39;C&gt; -&gt; Series&lt;&#39;C,int&gt; (requires equality and equality)<br />&#160;&#160;static member count : series:Series&lt;&#39;K,&#39;V&gt; -&gt; int (requires equality)<br />&#160;&#160;static member expandingCount : series:Series&lt;&#39;K,float&gt; -&gt; Series&lt;&#39;K,float&gt; (requires equality)<br />&#160;&#160;static member expandingKurt : series:Series&lt;&#39;K,float&gt; -&gt; Series&lt;&#39;K,float&gt; (requires equality)<br />&#160;&#160;static member expandingMax : series:Series&lt;&#39;K,float&gt; -&gt; Series&lt;&#39;K,float&gt; (requires equality)<br />&#160;&#160;static member expandingMean : series:Series&lt;&#39;K,float&gt; -&gt; Series&lt;&#39;K,float&gt; (requires equality)<br />&#160;&#160;static member expandingMin : series:Series&lt;&#39;K,float&gt; -&gt; Series&lt;&#39;K,float&gt; (requires equality)<br />&#160;&#160;static member expandingSkew : series:Series&lt;&#39;K,float&gt; -&gt; Series&lt;&#39;K,float&gt; (requires equality)<br />&#160;&#160;static member expandingStdDev : series:Series&lt;&#39;K,float&gt; -&gt; Series&lt;&#39;K,float&gt; (requires equality)<br />&#160;&#160;static member expandingSum : series:Series&lt;&#39;K,float&gt; -&gt; Series&lt;&#39;K,float&gt; (requires equality)<br />&#160;&#160;...<br /><br />Full name: Deedle.Stats</div>
<div class="tip" id="fs68">static member Stats.mean : frame:Frame&lt;&#39;R,&#39;C&gt; -&gt; Series&lt;&#39;C,float&gt; (requires equality and equality)<br />static member Stats.mean : series:Series&lt;&#39;K,float&gt; -&gt; float (requires equality)</div>
<div class="tip" id="fs69">val jan : Frame&lt;DateTime,string&gt;<br /><br />Full name: Tutorial.jan</div>
<div class="tip" id="fs70">val daysSeries : Series&lt;DateTime,float&gt;<br /><br />Full name: Tutorial.daysSeries</div>
<div class="tip" id="fs71">property DateTime.Today: DateTime</div>
<div class="tip" id="fs72">val obsSeries : Series&lt;DateTime,float&gt;<br /><br />Full name: Tutorial.obsSeries</div>
<div class="tip" id="fs73">val nan : float<br /><br />Full name: Microsoft.FSharp.Core.Operators.nan</div>
<div class="tip" id="fs74">member Series.Get : key:&#39;K -&gt; &#39;V<br />member Series.Get : key:&#39;K * lookup:Lookup -&gt; &#39;V</div>
<div class="tip" id="fs75">type Lookup =<br />&#160;&#160;|  Exact  =  1<br />&#160;&#160;|  ExactOrGreater  =  3<br />&#160;&#160;|  ExactOrSmaller  =  5<br />&#160;&#160;|  Greater  =  2<br />&#160;&#160;|  Smaller  =  4<br /><br />Full name: Deedle.Lookup</div>
<div class="tip" id="fs76">Lookup.ExactOrSmaller: Lookup = 5</div>
<div class="tip" id="fs77">val daysFrame : Frame&lt;DateTime,int&gt;<br /><br />Full name: Tutorial.daysFrame</div>
<div class="tip" id="fs78">val obsFrame : Frame&lt;DateTime,int&gt;<br /><br />Full name: Tutorial.obsFrame</div>
<div class="tip" id="fs79">val obsDaysExact : Frame&lt;DateTime,int&gt;<br /><br />Full name: Tutorial.obsDaysExact</div>
<div class="tip" id="fs80">JoinKind.Left: JoinKind = 2</div>
<div class="tip" id="fs81">val obsDaysPrev : Frame&lt;DateTime,int&gt;<br /><br />Full name: Tutorial.obsDaysPrev</div>
<div class="tip" id="fs82">val joinAlign : kind:JoinKind -&gt; lookup:Lookup -&gt; frame1:Frame&lt;&#39;R,&#39;C&gt; -&gt; frame2:Frame&lt;&#39;R,&#39;C&gt; -&gt; Frame&lt;&#39;R,&#39;C&gt; (requires equality and equality)<br /><br />Full name: Deedle.Frame.joinAlign</div>
<div class="tip" id="fs83">val obsDaysNext : Frame&lt;DateTime,int&gt;<br /><br />Full name: Tutorial.obsDaysNext</div>
<div class="tip" id="fs84">Lookup.ExactOrGreater: Lookup = 3</div>
<div class="tip" id="fs85">type Comparison&lt;&#39;T&gt; =<br />&#160;&#160;delegate of &#39;T * &#39;T -&gt; int<br /><br />Full name: System.Comparison&lt;_&gt;</div>
<div class="tip" id="fs86">val mapRowValues : f:(ObjectSeries&lt;&#39;C&gt; -&gt; &#39;V) -&gt; frame:Frame&lt;&#39;R,&#39;C&gt; -&gt; Series&lt;&#39;R,&#39;V&gt; (requires equality and equality)<br /><br />Full name: Deedle.Frame.mapRowValues</div>
<div class="tip" id="fs87">val row : ObjectSeries&lt;string&gt;</div>
<div class="tip" id="fs88">member Frame.GetColumn : column:&#39;TColumnKey -&gt; Series&lt;&#39;TRowKey,&#39;R&gt;<br />member Frame.GetColumn : column:&#39;TColumnKey * lookup:Lookup -&gt; Series&lt;&#39;TRowKey,&#39;R&gt;</div>
<div class="tip" id="fs89">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs90">val filterValues : f:(&#39;T -&gt; bool) -&gt; series:Series&lt;&#39;K,&#39;T&gt; -&gt; Series&lt;&#39;K,&#39;T&gt; (requires equality)<br /><br />Full name: Deedle.Series.filterValues</div>
<div class="tip" id="fs91">val countValues : series:Series&lt;&#39;K,&#39;T&gt; -&gt; int (requires equality)<br /><br />Full name: Deedle.Series.countValues</div>
<div class="tip" id="fs92">val joinedOpens : Frame&lt;DateTime,string&gt;<br /><br />Full name: Tutorial.joinedOpens</div>
<div class="tip" id="fs93">property Frame.RowsDense: RowSeries&lt;DateTime,string&gt;</div>
<div class="tip" id="fs94">val monthly : Frame&lt;(DateTime * DateTime),string&gt;<br /><br />Full name: Tutorial.monthly</div>
<div class="tip" id="fs95">val groupRowsUsing : selector:(&#39;R -&gt; ObjectSeries&lt;&#39;C&gt; -&gt; &#39;K) -&gt; frame:Frame&lt;&#39;R,&#39;C&gt; -&gt; Frame&lt;(&#39;K * &#39;R),&#39;C&gt; (requires equality and equality and equality)<br /><br />Full name: Deedle.Frame.groupRowsUsing</div>
<div class="tip" id="fs96">val k : DateTime</div>
<div class="tip" id="fs97">property DateTime.Year: int</div>
<div class="tip" id="fs98">property DateTime.Month: int</div>
<div class="tip" id="fs99">property Frame.Rows: RowSeries&lt;(DateTime * DateTime),string&gt;</div>
<div class="tip" id="fs100">val mapValues : f:(&#39;T -&gt; &#39;R) -&gt; series:Series&lt;&#39;K,&#39;T&gt; -&gt; Series&lt;&#39;K,&#39;R&gt; (requires equality)<br /><br />Full name: Deedle.Series.mapValues</div>
<div class="tip" id="fs101">static member Stats.levelMean : level:(&#39;K -&gt; &#39;L) -&gt; series:Series&lt;&#39;K,float&gt; -&gt; Series&lt;&#39;L,float&gt; (requires equality and equality)</div>
<div class="tip" id="fs102">val fst : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T1<br /><br />Full name: Microsoft.FSharp.Core.Operators.fst</div>

        </div>
        <div class="span3">
          <a href="/Deedle/ja/index.html">
            <img src="/Deedle/ja/../images/logo.png" style="width:140px;height:140px;margin:10px 0px 0px 35px;border-style:none;" />
          </a>

          <ul class="nav nav-list" id="menu">
            <li class="nav-header">Deedle</li>
            <li><a href="/Deedle/ja/index.html">ホームページ</a></li>
            <li class="divider"></li>
            <li><a href="https://nuget.org/packages/Deedle">NuGet経由でライブラリを取得</a></li>
            <li><a href="http://github.com/BlueMountainCapital/Deedle">GitHub上のソースコード</a></li>
            <li><a href="http://github.com/BlueMountainCapital/Deedle/blob/master/LICENSE.md">ライセンス</a></li>
            <li><a href="http://github.com/BlueMountainCapital/Deedle/blob/master/RELEASE_NOTES.md">リリースノート</a></li>
            <li><a href="/Deedle/ja/design.html">デザインノート</a></li>
            <li><a href="http://stackoverflow.com/questions/tagged/deedle">質問する！</a></li>
            
            <li class="nav-header">F#で使用する</li>
            <li>
              <a href="/Deedle/ja/tutorial.html">クイックスタートチュートリアル</a>
              <ul class="nav nav-list">
                <li><a href="/Deedle/ja/tutorial.html#creating">データフレームの作成</a></li>
                <li><a href="/Deedle/ja/tutorial.html#reindexing-and-joins">インデックスと結合を使用する</a></li>
                <li><a href="/Deedle/ja/tutorial.html#selecting">値の選択とスライシング</a></li>
                <li><a href="/Deedle/ja/tutorial.html#timeseries">時系列データ</a></li>
                <li><a href="/Deedle/ja/tutorial.html#projections">射影とフィルタリング</a></li>
                <li><a href="/Deedle/ja/tutorial.html#grouping">グループ化と集計</a></li>
              </ul>
            </li>
            <li>
              <a href="/Deedle/ja/series.html">時系列の処理</a>
            </li>
            <li>
              <a href="/Deedle/ja/frame.html">データフレームの処理</a>
            </li>
            <li>
              <a href="/Deedle/ja/stats.html">統計および計算</a>
            </li>
            <li>
              <a href="/Deedle/ja/rinterop.html">RとDeedleを組み合わせる</a>
            </li>

            <li class="nav-header">C#で使用する</li>
            <li><a href="/Deedle/ja/csharpintro.html">はじめに</a></li>
            <li>
              <a href="/Deedle/ja/csharpseries.html">時系列データの処理</a>
            </li>
            <li>
              <a href="/Deedle/ja/csharpframe.html">データフレームの処理</a>
            </li>

            <li class="nav-header">ドキュメント</li>
            <li><a href="/Deedle/ja/reference/index.html">APIリファレンス(En)</a></li>
            <li class="divider"></li>
            <li><a href="/Deedle/ja/reference/deedle-seriesmodule.html">Series モジュール</a></li>
            <li><a href="/Deedle/ja/reference/deedle-framemodule.html">Frame モジュール</a></li>
            <li><a href="/Deedle/ja/reference/deedle-stats.html">Stats モジュール</a></li>

            <li class="nav-header">サンプル</li>
            <li><a href="/Deedle/ja/lazysource.html">遅延データ読み込み</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/BlueMountainCapital/Deedle"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
    <script>
      (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
      ga('create', 'UA-45379232-1', 'bluemountaincapital.github.io');
      ga('send', 'pageview');
    </script>
  </body>
</html>